QuestaSim-64 vcover 10.7c Coverage Utility 2018.08 Aug 17 2018
Start time: 19:26:27 on Dec 17,2020
vcover report -details /home/es5017/nfshome/hwcw2/ucdb_files/ahb_uart_tb.ucdb 
Coverage Report by file with details

=================================================================================
=== File: /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/AHBUART.v
=================================================================================
Statement Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Stmts                           15        15         0    100.00

================================Statement Details================================

Statement Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/AHBUART.v --

    1                                                //////////////////////////////////////////////////////////////////////////////////
    2                                                //END USER LICENCE AGREEMENT                                                    //
    3                                                //                                                                              //
    4                                                //Copyright (c) 2012, ARM All rights reserved.                                  //
    5                                                //                                                                              //
    6                                                //THIS END USER LICENCE AGREEMENT (�LICENCE�) IS A LEGAL AGREEMENT BETWEEN      //
    7                                                //YOU AND ARM LIMITED ("ARM") FOR THE USE OF THE SOFTWARE EXAMPLE ACCOMPANYING  //
    8                                                //THIS LICENCE. ARM IS ONLY WILLING TO LICENSE THE SOFTWARE EXAMPLE TO YOU ON   //
    9                                                //CONDITION THAT YOU ACCEPT ALL OF THE TERMS IN THIS LICENCE. BY INSTALLING OR  //
    10                                               //OTHERWISE USING OR COPYING THE SOFTWARE EXAMPLE YOU INDICATE THAT YOU AGREE   //
    11                                               //TO BE BOUND BY ALL OF THE TERMS OF THIS LICENCE. IF YOU DO NOT AGREE TO THE   //
    12                                               //TERMS OF THIS LICENCE, ARM IS UNWILLING TO LICENSE THE SOFTWARE EXAMPLE TO    //
    13                                               //YOU AND YOU MAY NOT INSTALL, USE OR COPY THE SOFTWARE EXAMPLE.                //
    14                                               //                                                                              //
    15                                               //ARM hereby grants to you, subject to the terms and conditions of this Licence,//
    16                                               //a non-exclusive, worldwide, non-transferable, copyright licence only to       //
    17                                               //redistribute and use in source and binary forms, with or without modification,//
    18                                               //for academic purposes provided the following conditions are met:              //
    19                                               //a) Redistributions of source code must retain the above copyright notice, this//
    20                                               //list of conditions and the following disclaimer.                              //
    21                                               //b) Redistributions in binary form must reproduce the above copyright notice,  //
    22                                               //this list of conditions and the following disclaimer in the documentation     //
    23                                               //and/or other materials provided with the distribution.                        //
    24                                               //                                                                              //
    25                                               //THIS SOFTWARE EXAMPLE IS PROVIDED BY THE COPYRIGHT HOLDER "AS IS" AND ARM     //
    26                                               //EXPRESSLY DISCLAIMS ANY AND ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING     //
    27                                               //WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR //
    28                                               //PURPOSE, WITH RESPECT TO THIS SOFTWARE EXAMPLE. IN NO EVENT SHALL ARM BE LIABLE/
    29                                               //FOR ANY DIRECT, INDIRECT, INCIDENTAL, PUNITIVE, OR CONSEQUENTIAL DAMAGES OF ANY/
    30                                               //KIND WHATSOEVER WITH RESPECT TO THE SOFTWARE EXAMPLE. ARM SHALL NOT BE LIABLE //
    31                                               //FOR ANY CLAIMS, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, //
    32                                               //TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE    //
    33                                               //EXAMPLE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE EXAMPLE. FOR THE AVOIDANCE/
    34                                               // OF DOUBT, NO PATENT LICENSES ARE BEING LICENSED UNDER THIS LICENSE AGREEMENT.//
    35                                               //////////////////////////////////////////////////////////////////////////////////
    36                                               
    37                                               
    38                                               module AHBUART(
    39                                                 //AHB Signals
    40                                                 input wire         HCLK,
    41                                                 input wire         HRESETn,
    42                                                 input wire  [31:0] HADDR,
    43                                                 input wire  [1:0]  HTRANS,
    44                                                 input wire  [31:0] HWDATA,
    45                                                 input wire         HWRITE,
    46                                                 input wire         HREADY,
    47                                                 
    48                                                 output wire        HREADYOUT,
    49                                                 output wire [31:0] HRDATA,
    50                                                 
    51                                                 input wire         HSEL,
    52                                                 
    53                                                 //Serial Port Signals
    54                                                 input wire         RsRx,  //Input from RS-232
    55                                                 output wire        RsTx,  //Output to RS-232
    56                                                 //UART Interrupt
    57                                                 
    58                                                 output wire uart_irq,  //Interrupt
    59                                               
    60                                                 input wire PARITYSEL, //1 for odd parity 0 for even (implemented like this because I saw it in the spec too late)
    61                                                 input wire parity_fault_injection, //0 for no fault, 1 for fault
    62                                                 output wire PARITYERR
    63                                                 // input wire [17:0] baud_rate // we use the bottom 8 bits of HADDR to indicate an update to baud rate
    64                                               );
    65                                               
    66                                               
    67                                               
    68                                               //Internal Signals
    69                                                 
    70                                                 //Data I/O between AHB and FIFO
    71                                                 wire [7:0] uart_wdata;  
    72                                                 wire [7:0] uart_rdata;
    73                                               
    74                                                 wire [8:0] uart_wdata_parity;  
    75                                                 wire [8:0] uart_rdata_parity;  
    76                                               
    77                                                 
    78                                                 //Signals from TX/RX to FIFOs
    79                                                 wire uart_wr;
    80                                                 wire uart_rd;
    81                                                 
    82                                               
    83                                                 //wires between FIFO and TX/RX
    84                                                 wire [8:0] rx_data_parity;
    85                                                 wire [8:0] tx_data_parity;
    86                                               
    87                                                 wire [31:0] status;
    88                                               
    89                                               
    90                                                 //FIFO Status
    91                                                 wire tx_full;
    92                                                 wire tx_empty;
    93                                                 wire rx_full;
    94                                                 wire rx_empty;
    95                                                 
    96                                                 //UART status ticks
    97                                                 wire tx_done;
    98                                                 wire rx_done;
    99                                                 
    100                                                //baud rate signal
    101                                                wire b_tick;
    102                                                
    103                                                //AHB Regs
    104                                                reg [1:0] last_HTRANS;
    105                                                reg [31:0] last_HADDR;
    106                                                reg last_HWRITE;
    107                                                reg last_HSEL;
    108                                                
    109                                                reg [15:0] parity_err_count; 
    110                                                reg [15:0] parity_err_count_next;
    111                                                
    112                                              //Set Registers for AHB Address State
    113             1                       6000       always@ (posedge HCLK)
    114                                                begin
    115                                                  if(HREADY)
    116                                                  begin
    117             1                       5999           last_HTRANS <= HTRANS;
    118             1                       5999           last_HWRITE <= HWRITE;
    119             1                       5999           last_HSEL <= HSEL;
    120             1                       5999           last_HADDR <= HADDR;
    121             1                       5999           parity_err_count <= parity_err_count_next;
    122                                                  end
    123                                                end
    124                                                
    125                                                
    126                                                //If Read and FIFO_RX is empty - wait.
    127                                                assign HREADYOUT = ~tx_full;
    128                                                 
    129                                                //UART  write select
    130             1                       4001       assign uart_wr = last_HTRANS[1] & last_HWRITE & last_HSEL& (last_HADDR[7:0]==8'h00);
    131                                                //Only write last 8 bits of Data
    132                                                assign uart_wdata = HWDATA[7:0];
    133                                              
    134                                                //UART read select
    135             1                       4001       assign uart_rd = last_HTRANS[1] & ~last_HWRITE & last_HSEL & (last_HADDR[7:0]==8'h00);
    136                                                
    137                                              
    138             1                       4973       assign HRDATA = (last_HADDR[7:0]==8'h00) ? {24'h0000_00,uart_rdata}:status;
    139             1                       3972       assign status = {parity_err_count,14'b0,tx_full,rx_empty};
    140                                                
    141                                                assign uart_irq = ~rx_empty; 
    142                                              
    143                                                reg [17:0] baud_rate;
    144                                                wire set_baud_rate;
    145                                              
    146             1                          1       initial baud_rate = 18'd19200;
    147             1                       4001       assign set_baud_rate = (last_HADDR[7:0] != 8'b0) &last_HWRITE & last_HSEL;
    148                                              
    149                                                
    150                                                 BAUDGEN uBAUDGEN(
    151                                                  .clk(HCLK),
    152                                                  .resetn(HRESETn),
    153                                                  .baud_rate(baud_rate),
    154                                                  .baudtick(b_tick)
    155                                                );
    156                                                
    157                                                PARITY_GEN
    158                                                  #(.DATA_IN_WIDTH(8))
    159                                                uPARITY_GEN
    160                                                (
    161                                                    .is_even_parity(~PARITYSEL),
    162                                                    .data_in(uart_wdata[7:0]),
    163                                                    .parity_fault_injection(parity_fault_injection),
    164                                                    .data_out(uart_wdata_parity[8:0])
    165                                                );   
    166                                                
    167                                              
    168                                                PARITY_CHECK
    169                                                  #(.ORIG_DATA_IN_WIDTH(8))
    170                                                uPARITY_CHECK
    171                                                (
    172                                                    .is_even_parity(~PARITYSEL),
    173                                                    .data_in_parity(uart_rdata_parity[8:0]),
    174                                                    .parity_fault_injection(parity_fault_injection),
    175                                                    .PARITYERR(PARITYERR)
    176                                                );    
    177                                              
    178                                                //Transmitter FIFO
    179                                                FIFO  
    180                                                 #(.DWIDTH(9), .AWIDTH(4))
    181                                              	uFIFO_TX 
    182                                                (
    183                                                  .clk(HCLK),
    184                                                  .resetn(HRESETn),
    185                                                  .rd(tx_done),
    186                                                  .wr(uart_wr),
    187                                                  .w_data(uart_wdata_parity[8:0]),
    188                                                  .empty(tx_empty),
    189                                                  .full(tx_full),
    190                                                  .r_data(tx_data_parity[8:0])
    191                                                );
    192                                                
    193                                                //Receiver FIFO
    194                                                FIFO 
    195                                                 #(.DWIDTH(9), .AWIDTH(4))
    196                                              	uFIFO_RX(
    197                                                  .clk(HCLK),
    198                                                  .resetn(HRESETn),
    199                                                  .rd(uart_rd),
    200                                                  .wr(rx_done),
    201                                                  .w_data(rx_data_parity[8:0]),
    202                                                  .empty(rx_empty),
    203                                                  .full(rx_full),
    204                                                  .r_data(uart_rdata_parity[8:0]) 
    205                                                );
    206                                              
    207                                                assign uart_rdata = uart_rdata_parity [7:0]; //extract the actual data without parity so it can be sent to AHB interface
    208                                              
    209             1                       1511       always @*
    210                                                begin 
    211             1                       1511         parity_err_count_next = parity_err_count;
    212                                                  if (PARITYERR)
    213                                                    begin
    214             1                        746             parity_err_count_next = parity_err_count + 1;
    215                                                    end
    216                                                end
    217                                                //UART receiver
    218                                                UART_RX uUART_RX(
    219                                                  .clk(HCLK),
    220                                                  .resetn(HRESETn),
    221                                                  .b_tick(b_tick),
    222                                                  .rx(RsRx),
    223                                                  .rx_done(rx_done),
    224                                                  .dout(rx_data_parity[8:0])
    225                                                );
    226                                                
    227                                                //UART transmitter
    228                                                UART_TX uUART_TX(
    229                                                  .clk(HCLK),
    230                                                  .resetn(HRESETn),
    231                                                  .tx_start(!tx_empty),
    232                                                  .b_tick(b_tick),
    233                                                  .d_in(tx_data_parity[8:0]),
    234                                                  .tx_done(tx_done),
    235                                                  .tx(RsTx)
    236                                                );
    237                                              
    238                                                
    239                                              
    240                                              endmodule

Branch Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Branches                         6         5         1     83.33

================================Branch Details================================

Branch Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/AHBUART.v --

------------------------------------IF Branch------------------------------------
    115                                     6000     Count coming in to IF
    115             1                       5999         if(HREADY)
                                               1     All False Count
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    138                                     4970     Count coming in to IF
    138             1                       4970       assign HRDATA = (last_HADDR[7:0]==8'h00) ? {24'h0000_00,uart_rdata}:status;
    138             2                    ***0***       assign HRDATA = (last_HADDR[7:0]==8'h00) ? {24'h0000_00,uart_rdata}:status;
Branch totals: 1 hit of 2 branches = 50.00%

------------------------------------IF Branch------------------------------------
    212                                     1511     Count coming in to IF
    212             1                        746         if (PARITYERR)
                                             765     All False Count
Branch totals: 2 hits of 2 branches = 100.00%


Condition Coverage:
    Enabled Coverage            Active   Covered    Misses % Covered
    ----------------            ------      ----    ------ ---------
    FEC Condition Terms              1         0         1      0.00

================================Condition Details================================

Condition Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/AHBUART.v --

----------------Focused Condition View-------------------
Line       138 Item    1  (last_HADDR[7:0] == 0)
Condition totals: 0 of 1 input term covered = 0.00%

              Input Term   Covered  Reason for no coverage   Hint
             -----------  --------  -----------------------  --------------
  (last_HADDR[7:0] == 0)         N  '_0' not hit             Hit '_0'

     Rows:       Hits  FEC Target                Non-masking condition(s)      
 ---------  ---------  --------------------      -------------------------     
  Row   1:    ***0***  (last_HADDR[7:0] == 0)_0  -                             
  Row   2:          1  (last_HADDR[7:0] == 0)_1  -                             


Expression Coverage:
    Enabled Coverage            Active   Covered    Misses % Covered
    ----------------            ------      ----    ------ ---------
    FEC Expression Terms            11         2         9     18.18

================================Expression Details================================

Expression Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/AHBUART.v --

----------------Focused Expression View-----------------
Line       130 Item    1  (((last_HTRANS[1] & last_HWRITE) & last_HSEL) & (last_HADDR[7:0] == 0))
Expression totals: 1 of 4 input terms covered = 25.00%

              Input Term   Covered  Reason for no coverage   Hint
             -----------  --------  -----------------------  --------------
          last_HTRANS[1]         N  '_0' not hit             Hit '_0'
             last_HWRITE         Y
               last_HSEL         N  '_0' not hit             Hit '_0'
  (last_HADDR[7:0] == 0)         N  '_0' not hit             Hit '_0'

     Rows:       Hits  FEC Target                Non-masking condition(s)      
 ---------  ---------  --------------------      -------------------------     
  Row   1:    ***0***  last_HTRANS[1]_0          ((last_HADDR[7:0] == 0) && last_HSEL && last_HWRITE)
  Row   2:          1  last_HTRANS[1]_1          ((last_HADDR[7:0] == 0) && last_HSEL && last_HWRITE)
  Row   3:          1  last_HWRITE_0             ((last_HADDR[7:0] == 0) && last_HSEL && last_HTRANS[1])
  Row   4:          1  last_HWRITE_1             ((last_HADDR[7:0] == 0) && last_HSEL && last_HTRANS[1])
  Row   5:    ***0***  last_HSEL_0               ((last_HADDR[7:0] == 0) && (last_HTRANS[1] & last_HWRITE))
  Row   6:          1  last_HSEL_1               ((last_HADDR[7:0] == 0) && (last_HTRANS[1] & last_HWRITE))
  Row   7:    ***0***  (last_HADDR[7:0] == 0)_0  ((last_HTRANS[1] & last_HWRITE) & last_HSEL)
  Row   8:          1  (last_HADDR[7:0] == 0)_1  ((last_HTRANS[1] & last_HWRITE) & last_HSEL)

----------------Focused Expression View-----------------
Line       135 Item    1  (((~last_HWRITE & last_HTRANS[1]) & last_HSEL) & (last_HADDR[7:0] == 0))
Expression totals: 1 of 4 input terms covered = 25.00%

              Input Term   Covered  Reason for no coverage   Hint
             -----------  --------  -----------------------  --------------
             last_HWRITE         Y
          last_HTRANS[1]         N  '_0' not hit             Hit '_0'
               last_HSEL         N  '_0' not hit             Hit '_0'
  (last_HADDR[7:0] == 0)         N  '_0' not hit             Hit '_0'

     Rows:       Hits  FEC Target                Non-masking condition(s)      
 ---------  ---------  --------------------      -------------------------     
  Row   1:          1  last_HWRITE_0             ((last_HADDR[7:0] == 0) && last_HSEL && last_HTRANS[1])
  Row   2:          1  last_HWRITE_1             ((last_HADDR[7:0] == 0) && last_HSEL && last_HTRANS[1])
  Row   3:    ***0***  last_HTRANS[1]_0          ((last_HADDR[7:0] == 0) && last_HSEL && ~last_HWRITE)
  Row   4:          1  last_HTRANS[1]_1          ((last_HADDR[7:0] == 0) && last_HSEL && ~last_HWRITE)
  Row   5:    ***0***  last_HSEL_0               ((last_HADDR[7:0] == 0) && (~last_HWRITE & last_HTRANS[1]))
  Row   6:          1  last_HSEL_1               ((last_HADDR[7:0] == 0) && (~last_HWRITE & last_HTRANS[1]))
  Row   7:    ***0***  (last_HADDR[7:0] == 0)_0  ((~last_HWRITE & last_HTRANS[1]) & last_HSEL)
  Row   8:          1  (last_HADDR[7:0] == 0)_1  ((~last_HWRITE & last_HTRANS[1]) & last_HSEL)

----------------Focused Expression View-----------------
Line       147 Item    1  (((last_HADDR[7:0] != 0) & last_HWRITE) & last_HSEL)
Expression totals: 0 of 3 input terms covered = 0.00%

              Input Term   Covered  Reason for no coverage   Hint
             -----------  --------  -----------------------  --------------
  (last_HADDR[7:0] != 0)         N  '_1' not hit             Hit '_1'
             last_HWRITE         N  No hits                  Hit '_0' and '_1'
               last_HSEL         N  No hits                  Hit '_0' and '_1'

     Rows:       Hits  FEC Target                Non-masking condition(s)      
 ---------  ---------  --------------------      -------------------------     
  Row   1:          1  (last_HADDR[7:0] != 0)_0  (last_HSEL && last_HWRITE)    
  Row   2:    ***0***  (last_HADDR[7:0] != 0)_1  (last_HSEL && last_HWRITE)    
  Row   3:    ***0***  last_HWRITE_0             (last_HSEL && (last_HADDR[7:0] != 0))
  Row   4:    ***0***  last_HWRITE_1             (last_HSEL && (last_HADDR[7:0] != 0))
  Row   5:    ***0***  last_HSEL_0               ((last_HADDR[7:0] != 0) & last_HWRITE)
  Row   6:    ***0***  last_HSEL_1               ((last_HADDR[7:0] != 0) & last_HWRITE)


Toggle Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Toggle Bins                    544       329       215     60.47

================================Toggle Details================================

Toggle Coverage for File /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/AHBUART.v --

       Line                                   Node      1H->0L      0L->1H  "Coverage"
--------------------------------------------------------------------------------------
         41                                HRESETn           0           1       50.00 
         42                               HADDR[7]           0           0        0.00 
         42                               HADDR[6]           0           0        0.00 
         42                               HADDR[5]           0           0        0.00 
         42                               HADDR[4]           0           0        0.00 
         42                               HADDR[3]           0           0        0.00 
         42                               HADDR[2]           0           0        0.00 
         42                               HADDR[1]           0           0        0.00 
         42                               HADDR[0]           0           0        0.00 
         43                              HTRANS[0]           0           0        0.00 
         46                                 HREADY           0           0        0.00 
         49                              HRDATA[9]           0           0        0.00 
         49                              HRDATA[8]           0           0        0.00 
         49                             HRDATA[31]           0           0        0.00 
         49                             HRDATA[30]           0           0        0.00 
         49                             HRDATA[29]           0           0        0.00 
         49                             HRDATA[28]           0           0        0.00 
         49                             HRDATA[27]           0           0        0.00 
         49                             HRDATA[26]           0           0        0.00 
         49                             HRDATA[25]           0           0        0.00 
         49                             HRDATA[24]           0           0        0.00 
         49                             HRDATA[23]           0           0        0.00 
         49                             HRDATA[22]           0           0        0.00 
         49                             HRDATA[21]           0           0        0.00 
         49                             HRDATA[20]           0           0        0.00 
         49                             HRDATA[19]           0           0        0.00 
         49                             HRDATA[18]           0           0        0.00 
         49                             HRDATA[17]           0           0        0.00 
         49                             HRDATA[16]           0           0        0.00 
         49                             HRDATA[15]           0           0        0.00 
         49                             HRDATA[14]           0           0        0.00 
         49                             HRDATA[13]           0           0        0.00 
         49                             HRDATA[12]           0           0        0.00 
         49                             HRDATA[11]           0           0        0.00 
         49                             HRDATA[10]           0           0        0.00 
         87                              status[9]           0           0        0.00 
         87                              status[8]           0           0        0.00 
         87                              status[7]           0           0        0.00 
         87                              status[6]           0           0        0.00 
         87                              status[5]           0           0        0.00 
         87                              status[4]           0           0        0.00 
         87                              status[3]           0           0        0.00 
         87                             status[31]           0           0        0.00 
         87                             status[30]           0           0        0.00 
         87                              status[2]           0           0        0.00 
         87                             status[29]           0           0        0.00 
         87                             status[28]           0           0        0.00 
         87                             status[27]           0           0        0.00 
         87                             status[26]           0           0        0.00 
         87                             status[25]           0           0        0.00 
         87                             status[24]           0           0        0.00 
         87                             status[23]           0           0        0.00 
         87                             status[22]           0           0        0.00 
         87                             status[21]           0           0        0.00 
         87                             status[20]           0           0        0.00 
         87                             status[19]           0           0        0.00 
         87                             status[18]           0           0        0.00 
         87                             status[17]           0           0        0.00 
         87                             status[16]           0           0        0.00 
         87                             status[15]           0           0        0.00 
         87                             status[14]           0           0        0.00 
         87                             status[13]           0           0        0.00 
         87                             status[12]           0           0        0.00 
         87                             status[11]           0           0        0.00 
         87                             status[10]           0           0        0.00 
         93                                rx_full           0           0        0.00 
        104                         last_HTRANS[0]           0           0        0.00 
        105                          last_HADDR[7]           0           0        0.00 
        105                          last_HADDR[6]           0           0        0.00 
        105                          last_HADDR[5]           0           0        0.00 
        105                          last_HADDR[4]           0           0        0.00 
        105                          last_HADDR[3]           0           0        0.00 
        105                          last_HADDR[2]           0           0        0.00 
        105                          last_HADDR[1]           0           0        0.00 
        105                          last_HADDR[0]           0           0        0.00 
        109                    parity_err_count[9]           0           0        0.00 
        109                    parity_err_count[8]           0           0        0.00 
        109                    parity_err_count[7]           0           0        0.00 
        109                    parity_err_count[6]           0           0        0.00 
        109                    parity_err_count[5]           0           0        0.00 
        109                    parity_err_count[4]           0           0        0.00 
        109                    parity_err_count[3]           0           0        0.00 
        109                    parity_err_count[2]           0           0        0.00 
        109                    parity_err_count[1]           0           0        0.00 
        109                   parity_err_count[15]           0           0        0.00 
        109                   parity_err_count[14]           0           0        0.00 
        109                   parity_err_count[13]           0           0        0.00 
        109                   parity_err_count[12]           0           0        0.00 
        109                   parity_err_count[11]           0           0        0.00 
        109                   parity_err_count[10]           0           0        0.00 
        109                    parity_err_count[0]           0           0        0.00 
        110               parity_err_count_next[9]           0           0        0.00 
        110               parity_err_count_next[8]           0           0        0.00 
        110               parity_err_count_next[7]           0           0        0.00 
        110               parity_err_count_next[6]           0           0        0.00 
        110               parity_err_count_next[5]           0           0        0.00 
        110               parity_err_count_next[4]           0           0        0.00 
        110               parity_err_count_next[3]           0           0        0.00 
        110               parity_err_count_next[2]           0           0        0.00 
        110               parity_err_count_next[1]           0           0        0.00 
        110              parity_err_count_next[15]           0           0        0.00 
        110              parity_err_count_next[14]           0           0        0.00 
        110              parity_err_count_next[13]           0           0        0.00 
        110              parity_err_count_next[12]           0           0        0.00 
        110              parity_err_count_next[11]           0           0        0.00 
        110              parity_err_count_next[10]           0           0        0.00 
        110               parity_err_count_next[0]           0           0        0.00 
        144                          set_baud_rate           0           0        0.00 

Total Node Count     =        272 
Toggled Node Count   =        164 
Untoggled Node Count =        108 

Toggle Coverage      =      60.47% (329 of 544 bins)

=================================================================================
=== File: /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/baudgen.v
=================================================================================
Statement Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Stmts                            6         6         0    100.00

================================Statement Details================================

Statement Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/baudgen.v --

    1                                                //////////////////////////////////////////////////////////////////////////////////
    2                                                //END USER LICENCE AGREEMENT                                                    //
    3                                                //                                                                              //
    4                                                //Copyright (c) 2012, ARM All rights reserved.                                  //
    5                                                //                                                                              //
    6                                                //THIS END USER LICENCE AGREEMENT ("LICENCE") IS A LEGAL AGREEMENT BETWEEN      //
    7                                                //YOU AND ARM LIMITED ("ARM") FOR THE USE OF THE SOFTWARE EXAMPLE ACCOMPANYING  //
    8                                                //THIS LICENCE. ARM IS ONLY WILLING TO LICENSE THE SOFTWARE EXAMPLE TO YOU ON   //
    9                                                //CONDITION THAT YOU ACCEPT ALL OF THE TERMS IN THIS LICENCE. BY INSTALLING OR  //
    10                                               //OTHERWISE USING OR COPYING THE SOFTWARE EXAMPLE YOU INDICATE THAT YOU AGREE   //
    11                                               //TO BE BOUND BY ALL OF THE TERMS OF THIS LICENCE. IF YOU DO NOT AGREE TO THE   //
    12                                               //TERMS OF THIS LICENCE, ARM IS UNWILLING TO LICENSE THE SOFTWARE EXAMPLE TO    //
    13                                               //YOU AND YOU MAY NOT INSTALL, USE OR COPY THE SOFTWARE EXAMPLE.                //
    14                                               //                                                                              //
    15                                               //ARM hereby grants to you, subject to the terms and conditions of this Licence,//
    16                                               //a non-exclusive, worldwide, non-transferable, copyright licence only to       //
    17                                               //redistribute and use in source and binary forms, with or without modification,//
    18                                               //for academic purposes provided the following conditions are met:              //
    19                                               //a) Redistributions of source code must retain the above copyright notice, this//
    20                                               //list of conditions and the following disclaimer.                              //
    21                                               //b) Redistributions in binary form must reproduce the above copyright notice,  //
    22                                               //this list of conditions and the following disclaimer in the documentation     //
    23                                               //and/or other materials provided with the distribution.                        //
    24                                               //                                                                              //
    25                                               //THIS SOFTWARE EXAMPLE IS PROVIDED BY THE COPYRIGHT HOLDER "AS IS" AND ARM     //
    26                                               //EXPRESSLY DISCLAIMS ANY AND ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING     //
    27                                               //WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR //
    28                                               //PURPOSE, WITH RESPECT TO THIS SOFTWARE EXAMPLE. IN NO EVENT SHALL ARM BE LIABLE/
    29                                               //FOR ANY DIRECT, INDIRECT, INCIDENTAL, PUNITIVE, OR CONSEQUENTIAL DAMAGES OF ANY/
    30                                               //KIND WHATSOEVER WITH RESPECT TO THE SOFTWARE EXAMPLE. ARM SHALL NOT BE LIABLE //
    31                                               //FOR ANY CLAIMS, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, //
    32                                               //TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE    //
    33                                               //EXAMPLE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE EXAMPLE. FOR THE AVOIDANCE/
    34                                               // OF DOUBT, NO PATENT LICENSES ARE BEING LICENSED UNDER THIS LICENSE AGREEMENT.//
    35                                               //////////////////////////////////////////////////////////////////////////////////
    36                                               
    37                                               module BAUDGEN
    38                                               #(parameter CLOCK_HZ = 50_000_000)
    39                                               (
    40                                                 input wire clk,
    41                                                 input wire resetn,
    42                                                 input reg [17:0] baud_rate,
    43                                                 output wire baudtick
    44                                               );
    45                                               
    46                                               
    47                                               reg [21:0] count_reg;
    48                                               wire [21:0] count_next;
    49                                               wire [21:0] nth_clk_for_baud;//the nth clock tick that the baud should tick on
    50                                               
    51                                               //Counter
    52              1                   57378618     always @ (posedge clk, negedge resetn)
    53                                                 begin
    54                                                   if(!resetn)
    55              1                          4           count_reg <= 0;
    56                                                   else
    57              1                   57378614           count_reg <= count_next;
    58                                               end
    59                                               
    60              1                          4     assign nth_clk_for_baud = (CLOCK_HZ / (baud_rate * 16));
    61                                               
    62                                               
    63                                               //Baudrate  = 19200 = 50Mhz/(163*16)
    64              1                   57378620     assign count_next = ((count_reg == nth_clk_for_baud) ? 0 : count_reg + 1'b1);
    65                                               
    66              1                   57378620     assign baudtick = ((count_reg == nth_clk_for_baud) ? 1'b1 : 1'b0);
    67                                               
    68                                               endmodule

Branch Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Branches                         4         4         0    100.00

================================Branch Details================================

Branch Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/baudgen.v --

------------------------------------IF Branch------------------------------------
    54                                  57378618     Count coming in to IF
    54              1                          4         if(!resetn)
    56              1                   57378614         else
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    64                                  57378616     Count coming in to IF
    64              1                     352016     assign count_next = ((count_reg == nth_clk_for_baud) ? 0 : count_reg + 1'b1);
    64              2                   57026600     assign count_next = ((count_reg == nth_clk_for_baud) ? 0 : count_reg + 1'b1);
Branch totals: 2 hits of 2 branches = 100.00%


Condition Coverage:
    Enabled Coverage            Active   Covered    Misses % Covered
    ----------------            ------      ----    ------ ---------
    FEC Condition Terms              1         1         0    100.00

================================Condition Details================================

Condition Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/baudgen.v --

----------------Focused Condition View-------------------
Line       64 Item    1  (count_reg == nth_clk_for_baud)
Condition totals: 1 of 1 input term covered = 100.00%


Expression Coverage:
    Enabled Coverage            Active   Covered    Misses % Covered
    ----------------            ------      ----    ------ ---------
    FEC Expression Terms             1         1         0    100.00

================================Expression Details================================

Expression Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/baudgen.v --

----------------Focused Expression View-----------------
Line       66 Item    1  (count_reg == nth_clk_for_baud)
Expression totals: 1 of 1 input term covered = 100.00%


Toggle Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Toggle Bins                    174        37       137     21.26

================================Toggle Details================================

Toggle Coverage for File /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/baudgen.v --

       Line                                   Node      1H->0L      0L->1H  "Coverage"
--------------------------------------------------------------------------------------
         41                                 resetn           0           2       50.00 
         42                           baud_rate[9]           0           0        0.00 
         42                           baud_rate[8]           0           0        0.00 
         42                           baud_rate[7]           0           0        0.00 
         42                           baud_rate[6]           0           0        0.00 
         42                           baud_rate[5]           0           0        0.00 
         42                           baud_rate[4]           0           0        0.00 
         42                           baud_rate[3]           0           0        0.00 
         42                           baud_rate[2]           0           0        0.00 
         42                           baud_rate[1]           0           0        0.00 
         42                          baud_rate[17]           0           0        0.00 
         42                          baud_rate[16]           0           0        0.00 
         42                          baud_rate[15]           0           0        0.00 
         42                          baud_rate[14]           0           0        0.00 
         42                          baud_rate[13]           0           0        0.00 
         42                          baud_rate[12]           0           0        0.00 
         42                          baud_rate[11]           0           0        0.00 
         42                          baud_rate[10]           0           0        0.00 
         42                           baud_rate[0]           0           0        0.00 
         47                           count_reg[9]           0           0        0.00 
         47                           count_reg[8]           0           0        0.00 
         47                          count_reg[21]           0           0        0.00 
         47                          count_reg[20]           0           0        0.00 
         47                          count_reg[19]           0           0        0.00 
         47                          count_reg[18]           0           0        0.00 
         47                          count_reg[17]           0           0        0.00 
         47                          count_reg[16]           0           0        0.00 
         47                          count_reg[15]           0           0        0.00 
         47                          count_reg[14]           0           0        0.00 
         47                          count_reg[13]           0           0        0.00 
         47                          count_reg[12]           0           0        0.00 
         47                          count_reg[11]           0           0        0.00 
         47                          count_reg[10]           0           0        0.00 
         48                          count_next[9]           0           0        0.00 
         48                          count_next[8]           0           0        0.00 
         48                         count_next[21]           0           0        0.00 
         48                         count_next[20]           0           0        0.00 
         48                         count_next[19]           0           0        0.00 
         48                         count_next[18]           0           0        0.00 
         48                         count_next[17]           0           0        0.00 
         48                         count_next[16]           0           0        0.00 
         48                         count_next[15]           0           0        0.00 
         48                         count_next[14]           0           0        0.00 
         48                         count_next[13]           0           0        0.00 
         48                         count_next[12]           0           0        0.00 
         48                         count_next[11]           0           0        0.00 
         48                         count_next[10]           0           0        0.00 
         49                    nth_clk_for_baud[9]           0           0        0.00 
         49                    nth_clk_for_baud[8]           0           0        0.00 
         49                    nth_clk_for_baud[7]           0           0        0.00 
         49                    nth_clk_for_baud[6]           0           0        0.00 
         49                    nth_clk_for_baud[5]           0           0        0.00 
         49                    nth_clk_for_baud[4]           0           0        0.00 
         49                    nth_clk_for_baud[3]           0           0        0.00 
         49                    nth_clk_for_baud[2]           0           0        0.00 
         49                   nth_clk_for_baud[21]           0           0        0.00 
         49                   nth_clk_for_baud[20]           0           0        0.00 
         49                    nth_clk_for_baud[1]           0           0        0.00 
         49                   nth_clk_for_baud[19]           0           0        0.00 
         49                   nth_clk_for_baud[18]           0           0        0.00 
         49                   nth_clk_for_baud[17]           0           0        0.00 
         49                   nth_clk_for_baud[16]           0           0        0.00 
         49                   nth_clk_for_baud[15]           0           0        0.00 
         49                   nth_clk_for_baud[14]           0           0        0.00 
         49                   nth_clk_for_baud[13]           0           0        0.00 
         49                   nth_clk_for_baud[12]           0           0        0.00 
         49                   nth_clk_for_baud[11]           0           0        0.00 
         49                   nth_clk_for_baud[10]           0           0        0.00 
         49                    nth_clk_for_baud[0]           0           0        0.00 

Total Node Count     =         87 
Toggled Node Count   =         18 
Untoggled Node Count =         69 

Toggle Coverage      =      21.26% (37 of 174 bins)

=================================================================================
=== File: /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/fifo.v
=================================================================================
Statement Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Stmts                           28        26         2     92.85

================================Statement Details================================

Statement Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/fifo.v --

    1                                                //////////////////////////////////////////////////////////////////////////////////
    2                                                //END USER LICENCE AGREEMENT                                                    //
    3                                                //                                                                              //
    4                                                //Copyright (c) 2012, ARM All rights reserved.                                  //
    5                                                //                                                                              //
    6                                                //THIS END USER LICENCE AGREEMENT (LICENCE) IS A LEGAL AGREEMENT BETWEEN      //
    7                                                //YOU AND ARM LIMITED ("ARM") FOR THE USE OF THE SOFTWARE EXAMPLE ACCOMPANYING  //
    8                                                //THIS LICENCE. ARM IS ONLY WILLING TO LICENSE THE SOFTWARE EXAMPLE TO YOU ON   //
    9                                                //CONDITION THAT YOU ACCEPT ALL OF THE TERMS IN THIS LICENCE. BY INSTALLING OR  //
    10                                               //OTHERWISE USING OR COPYING THE SOFTWARE EXAMPLE YOU INDICATE THAT YOU AGREE   //
    11                                               //TO BE BOUND BY ALL OF THE TERMS OF THIS LICENCE. IF YOU DO NOT AGREE TO THE   //
    12                                               //TERMS OF THIS LICENCE, ARM IS UNWILLING TO LICENSE THE SOFTWARE EXAMPLE TO    //
    13                                               //YOU AND YOU MAY NOT INSTALL, USE OR COPY THE SOFTWARE EXAMPLE.                //
    14                                               //                                                                              //
    15                                               //ARM hereby grants to you, subject to the terms and conditions of this Licence,//
    16                                               //a non-exclusive, worldwide, non-transferable, copyright licence only to       //
    17                                               //redistribute and use in source and binary forms, with or without modification,//
    18                                               //for academic purposes provided the following conditions are met:              //
    19                                               //a) Redistributions of source code must retain the above copyright notice, this//
    20                                               //list of conditions and the following disclaimer.                              //
    21                                               //b) Redistributions in binary form must reproduce the above copyright notice,  //
    22                                               //this list of conditions and the following disclaimer in the documentation     //
    23                                               //and/or other materials provided with the distribution.                        //
    24                                               //                                                                              //
    25                                               //THIS SOFTWARE EXAMPLE IS PROVIDED BY THE COPYRIGHT HOLDER "AS IS" AND ARM     //
    26                                               //EXPRESSLY DISCLAIMS ANY AND ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING     //
    27                                               //WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR //
    28                                               //PURPOSE, WITH RESPECT TO THIS SOFTWARE EXAMPLE. IN NO EVENT SHALL ARM BE LIABLE/
    29                                               //FOR ANY DIRECT, INDIRECT, INCIDENTAL, PUNITIVE, OR CONSEQUENTIAL DAMAGES OF ANY/
    30                                               //KIND WHATSOEVER WITH RESPECT TO THE SOFTWARE EXAMPLE. ARM SHALL NOT BE LIABLE //
    31                                               //FOR ANY CLAIMS, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, //
    32                                               //TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE    //
    33                                               //EXAMPLE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE EXAMPLE. FOR THE AVOIDANCE/
    34                                               // OF DOUBT, NO PATENT LICENSES ARE BEING LICENSED UNDER THIS LICENSE AGREEMENT.//
    35                                               //////////////////////////////////////////////////////////////////////////////////
    36                                               
    37                                               
    38                                               module FIFO #(parameter DWIDTH=8, AWIDTH=1)
    39                                               (
    40                                                 input wire clk,
    41                                                 input wire resetn,
    42                                                 input wire rd,
    43                                                 input wire wr,
    44                                                 input wire [DWIDTH-1:0] w_data,
    45                                                 
    46                                                 output wire empty,
    47                                                 output wire full,
    48                                                 output wire [DWIDTH-1:0] r_data
    49                                               );
    50                                               
    51                                               //Internal Signal declarations
    52                                               
    53                                                 reg [DWIDTH-1:0] array_reg [2**AWIDTH-1:0];
    54                                                 reg [AWIDTH-1:0] w_ptr_reg;
    55                                                 reg [AWIDTH-1:0] w_ptr_next;
    56                                                 reg [AWIDTH-1:0] w_ptr_succ;
    57                                                 reg [AWIDTH-1:0] r_ptr_reg;
    58                                                 reg [AWIDTH-1:0] r_ptr_next;
    59                                                 reg [AWIDTH-1:0] r_ptr_succ;
    60                                                 
    61                                                 reg full_reg;
    62                                                 reg empty_reg;
    63                                                 reg full_next;
    64                                                 reg empty_next;
    65                                                 
    66                                                 wire w_en;
    67                                                 
    68                                               
    69              1                      13567       always @ (posedge clk)
    70                                                   if(w_en)
    71                                                   begin
    72              1                       2000           array_reg[w_ptr_reg] <= w_data;
    73                                                   end
    74                                               
    75              1                       3996       assign r_data = array_reg[r_ptr_reg];   
    76                                               
    77              1                       4990       assign w_en = wr & ~full_reg;           
    78                                               
    79                                               //State Machine
    80              1                       8005       always @ (posedge clk, negedge resetn)
    81                                                 begin
    82                                                   if(!resetn)
    83                                                     begin
    84              1                          4             w_ptr_reg <= 0;
    85              1                          4             r_ptr_reg <= 0;
    86              1                          4             full_reg <= 1'b0;
    87              1                          4             empty_reg <= 1'b1;
    88                                                     end
    89                                                   else
    90                                                     begin
    91              1                       8001             w_ptr_reg <= w_ptr_next;
    92              1                       8001             r_ptr_reg <= r_ptr_next;
    93              1                       8001             full_reg <= full_next;
    94              1                       8001             empty_reg <= empty_next;
    95                                                     end
    96                                                 end
    97                                               
    98                                               
    99                                               //Next State Logic
    100             1                      10005       always @*
    101                                                begin
    102             1                      10005         w_ptr_succ = w_ptr_reg + 1;
    103             1                      10005         r_ptr_succ = r_ptr_reg + 1;
    104                                                  
    105             1                      10005         w_ptr_next = w_ptr_reg;
    106             1                      10005         r_ptr_next = r_ptr_reg;
    107             1                      10005         full_next = full_reg;
    108             1                      10005         empty_next = empty_reg;
    109                                                  
    110                                                  case({w_en,rd})
    111                                                    //2'b00: nop
    112                                                    2'b01:
    113                                                      if(~empty_reg)
    114                                                        begin
    115             1                       2999                 r_ptr_next = r_ptr_succ;
    116             1                       2999                 full_next = 1'b0;
    117                                                          if (r_ptr_succ == w_ptr_reg)
    118             1                       1002                   empty_next = 1'b1;
    119                                                        end
    120                                                    2'b10:
    121                                                      if(~full_reg)
    122                                                        begin
    123             1                       3000                 w_ptr_next = w_ptr_succ;
    124             1                       3000                 empty_next = 1'b0;
    125                                                          if (w_ptr_succ == r_ptr_reg)
    126             1                        985                   full_next = 1'b1;
    127                                                        end
    128                                                    2'b11:
    129                                                      begin
    130             1                    ***0***               w_ptr_next = w_ptr_succ;
    131             1                    ***0***               r_ptr_next = r_ptr_succ;
    132                                                      end
    133                                                  endcase
    134                                                end
    135                                              
    136                                              //Set Full and Empty
    137                                              
    138                                                assign full = full_reg;
    139                                                assign empty = empty_reg;
    140                                                
    141                                              endmodule
    142                                              
    143                                               
    144                                               
    145                                              
    146                                                

Branch Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Branches                        16        14         2     87.50

================================Branch Details================================

Branch Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/fifo.v --

------------------------------------IF Branch------------------------------------
    70                                     13567     Count coming in to IF
    70              1                       2000         if(w_en)
                                           11567     All False Count
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    82                                      8005     Count coming in to IF
    82              1                          4         if(!resetn)
    89              1                       8001         else
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------CASE Branch------------------------------------
    110                                    10005     Count coming in to CASE
    112             1                       3000           2'b01:
    120             1                       3000           2'b10:
    128             1                    ***0***           2'b11:
                                            4005     All False Count
Branch totals: 3 hits of 4 branches = 75.00%

------------------------------------IF Branch------------------------------------
    113                                     3000     Count coming in to IF
    113             1                       2999             if(~empty_reg)
                                               1     All False Count
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    117                                     2999     Count coming in to IF
    117             1                       1002                 if (r_ptr_succ == w_ptr_reg)
                                            1997     All False Count
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    121                                     3000     Count coming in to IF
    121             1                       3000             if(~full_reg)
                                         ***0***     All False Count
Branch totals: 1 hit of 2 branches = 50.00%

------------------------------------IF Branch------------------------------------
    125                                     3000     Count coming in to IF
    125             1                        985                 if (w_ptr_succ == r_ptr_reg)
                                            2015     All False Count
Branch totals: 2 hits of 2 branches = 100.00%


Condition Coverage:
    Enabled Coverage            Active   Covered    Misses % Covered
    ----------------            ------      ----    ------ ---------
    FEC Condition Terms              2         2         0    100.00

================================Condition Details================================

Condition Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/fifo.v --

----------------Focused Condition View-------------------
Line       117 Item    1  (r_ptr_succ == w_ptr_reg)
Condition totals: 1 of 1 input term covered = 100.00%

----------------Focused Condition View-------------------
Line       125 Item    1  (w_ptr_succ == r_ptr_reg)
Condition totals: 1 of 1 input term covered = 100.00%


Expression Coverage:
    Enabled Coverage            Active   Covered    Misses % Covered
    ----------------            ------      ----    ------ ---------
    FEC Expression Terms             2         1         1     50.00

================================Expression Details================================

Expression Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/fifo.v --

----------------Focused Expression View-----------------
Line       77 Item    1  (wr & ~full_reg)
Expression totals: 1 of 2 input terms covered = 50.00%

  Input Term   Covered  Reason for no coverage   Hint
 -----------  --------  -----------------------  --------------
          wr         Y
    full_reg         N  '_1' not hit             Hit '_1'

     Rows:       Hits  FEC Target            Non-masking condition(s)      
 ---------  ---------  --------------------  -------------------------     
  Row   1:          2  wr_0                  ~full_reg                     
  Row   2:          2  wr_1                  ~full_reg                     
  Row   3:          2  full_reg_0            wr                            
  Row   4:    ***0***  full_reg_1            wr                            


Toggle Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Toggle Bins                    106       105         1     99.05

================================Toggle Details================================

Toggle Coverage for File /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/fifo.v --

       Line                                   Node      1H->0L      0L->1H  "Coverage"
--------------------------------------------------------------------------------------
         41                                 resetn           0           2       50.00 

Total Node Count     =         53 
Toggled Node Count   =         52 
Untoggled Node Count =          1 

Toggle Coverage      =      99.05% (105 of 106 bins)

=================================================================================
=== File: /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/parity_check.v
=================================================================================
Statement Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Stmts                            2         2         0    100.00

================================Statement Details================================

Statement Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/parity_check.v --

    1                                                module PARITY_CHECK
    2                                                #(parameter ORIG_DATA_IN_WIDTH=8) //data size without parity
    3                                                (
    4                                                    input wire is_even_parity, //1 for even 0 for odd
    5                                                    input wire [ORIG_DATA_IN_WIDTH:0] data_in_parity, //data with parity
    6                                                    input wire parity_fault_injection,
    7                                                
    8                                                    output wire PARITYERR
    9                                                );
    10                                               
    11                                               //i think this is wrong
    12                                               //  assign PARITYERR = parity_fault_injection ^ ((^data_in_parity[ORIG_DATA_IN_WIDTH:0]) ^ is_even_parity);
    13                                               
    14                                               // endmodule
    15                                               
    16                                               
    17                                               wire [ORIG_DATA_IN_WIDTH:0] d_in_parity_with_fault_inj; //data_in_parity with fault injection
    18                                               
    19              1                       2164     assign d_in_parity_with_fault_inj = 
    20                                                   parity_fault_injection
    21                                                   ?
    22                                                   {~data_in_parity[ORIG_DATA_IN_WIDTH], data_in_parity[ORIG_DATA_IN_WIDTH-1:0]} //flip the parity bit
    23                                                   :
    24                                                   data_in_parity[ORIG_DATA_IN_WIDTH:0]
    25                                                   ;
    26                                                
    27                                                
    28              1                       2581     assign PARITYERR =
    29                                                   (
    30                                                   is_even_parity
    31                                                   ? 
    32                                                   ^d_in_parity_with_fault_inj[ORIG_DATA_IN_WIDTH-1:0]
    33                                                   :
    34                                                   ~(^d_in_parity_with_fault_inj[ORIG_DATA_IN_WIDTH-1:0])
    35                                                   )
    36                                                   != 
    37                                                   d_in_parity_with_fault_inj[ORIG_DATA_IN_WIDTH]
    38                                                   ;
    39                                               
    40                                               endmodule
    41                                               
    42                                               module parity_check_sanity_test();
    43                                               
    44                                                   wire parity_err;
    45                                               
    46                                                   PARITY_CHECK
    47                                                       #(.ORIG_DATA_IN_WIDTH(8))
    48                                                   uPARITY_CHECK
    49                                                   (
    50                                                       .is_even_parity(1'b1),
    51                                                       .data_in_parity(9'b010101010),
    52                                                       .PARITYERR(parity_err)
    53                                                   );    
    54                                               
    55                                                   initial begin
    56                                                       #100
    57                                                       $display("%b", parity_err);
    58                                                   end
    59                                               
    60                                               endmodule

Branch Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Branches                         4         4         0    100.00

================================Branch Details================================

Branch Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/parity_check.v --

------------------------------------IF Branch------------------------------------
    22                                      2163     Count coming in to IF
    22              1                        266         {~data_in_parity[ORIG_DATA_IN_WIDTH], data_in_parity[ORIG_DATA_IN_WIDTH-1:0]} //flip the parity bit
    24              1                       1897         data_in_parity[ORIG_DATA_IN_WIDTH:0]
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    32                                      2580     Count coming in to IF
    32              1                       1221         ^d_in_parity_with_fault_inj[ORIG_DATA_IN_WIDTH-1:0]
    34              1                       1359         ~(^d_in_parity_with_fault_inj[ORIG_DATA_IN_WIDTH-1:0])
Branch totals: 2 hits of 2 branches = 100.00%


Expression Coverage:
    Enabled Coverage            Active   Covered    Misses % Covered
    ----------------            ------      ----    ------ ---------
    FEC Expression Terms             1         1         0    100.00

================================Expression Details================================

Expression Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/parity_check.v --

----------------Focused Expression View-----------------
Line       29 Item    1  ((is_even_parity? ^d_in_parity_with_fault_inj[7:0]: ~^d_in_parity_with_fault_inj[7:0]) != d_in_parity_with_fault_inj[8])
Expression totals: 1 of 1 input term covered = 100.00%


Toggle Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Toggle Bins                     42        42         0    100.00

================================Toggle Details================================

Toggle Coverage for File /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/parity_check.v --

       Line                                   Node      1H->0L      0L->1H  "Coverage"
--------------------------------------------------------------------------------------

Total Node Count     =         21 
Toggled Node Count   =         21 
Untoggled Node Count =          0 

Toggle Coverage      =     100.00% (42 of 42 bins)

=================================================================================
=== File: /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/parity_gen.v
=================================================================================
Statement Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Stmts                            2         2         0    100.00

================================Statement Details================================

Statement Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/parity_gen.v --

    1                                                
    2                                                
    3                                                
    4                                                module PARITY_GEN
    5                                                #(parameter DATA_IN_WIDTH=8)
    6                                                (
    7                                                    input wire is_even_parity, //1 for even 0 for odd
    8                                                    input wire [DATA_IN_WIDTH-1:0] data_in,
    9                                                    input wire parity_fault_injection,
    10                                               
    11                                                   output wire [DATA_IN_WIDTH:0] data_out
    12                                               );
    13                                                
    14                                               // assign data_out = {^data_in[DATA_IN_WIDTH-1:0] ~^ is_even_parity ^ parity_fault_injection, data_in};
    15                                               
    16              1                       1494     assign parity_bit = 
    17                                                   is_even_parity 
    18                                                   ?
    19                                                   ^data_in[DATA_IN_WIDTH-1:0]
    20                                                   :
    21                                                   ~(^data_in[DATA_IN_WIDTH-1:0]);
    22                                               
    23              1                       2124     assign data_out = { 
    24                                                   parity_fault_injection ? ~parity_bit : parity_bit
    25                                                   ,
    26                                                   data_in[DATA_IN_WIDTH-1:0]
    27                                                   };
    28                                               
    29                                                
    30                                               
    31                                               endmodule
    32                                               
    33                                               module parity_gen_sanity_test();
    34                                               
    35                                                   wire [8:0] data_out;
    36                                               
    37                                                   PARITY_GEN
    38                                                       #(.DATA_IN_WIDTH(8))
    39                                                   uPARITY_GEN
    40                                                   (
    41                                                       .is_even_parity(1'b1),
    42                                                       .data_in(8'b01000001),
    43                                                       .data_out(data_out[8:0]),
    44                                                       .parity_fault_injection(1'b0)
    45                                                   );    
    46                                               
    47                                                   initial begin
    48                                                       #100
    49                                                       $display("Parity bit: %b", data_out[8]);
    50                                                   end
    51                                               
    52                                               endmodule

Branch Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Branches                         4         4         0    100.00

================================Branch Details================================

Branch Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/parity_gen.v --

------------------------------------IF Branch------------------------------------
    19                                      1493     Count coming in to IF
    19              1                        722         ^data_in[DATA_IN_WIDTH-1:0]
    21              1                        771         ~(^data_in[DATA_IN_WIDTH-1:0]);
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    24                                      2123     Count coming in to IF
    24              1                        274         parity_fault_injection ? ~parity_bit : parity_bit
    24              2                       1849         parity_fault_injection ? ~parity_bit : parity_bit
Branch totals: 2 hits of 2 branches = 100.00%


Expression Coverage:
    Enabled Coverage            Active   Covered    Misses % Covered
    ----------------            ------      ----    ------ ---------
    FEC Expression Terms             3         3         0    100.00

================================Expression Details================================

Expression Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/parity_gen.v --

-----------Focused Expression View (Bimodal)------------
Line       17 Item    1  (is_even_parity? ^data_in: ~^data_in)
Expression totals: 3 of 3 input terms covered = 100.00%


Toggle Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Toggle Bins                     40        40         0    100.00

================================Toggle Details================================

Toggle Coverage for File /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/parity_gen.v --

       Line                                   Node      1H->0L      0L->1H  "Coverage"
--------------------------------------------------------------------------------------

Total Node Count     =         20 
Toggled Node Count   =         20 
Untoggled Node Count =          0 

Toggle Coverage      =     100.00% (40 of 40 bins)

=================================================================================
=== File: /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/uart_rx.v
=================================================================================
Statement Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Stmts                           29        29         0    100.00

================================Statement Details================================

Statement Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/uart_rx.v --

    1                                                //////////////////////////////////////////////////////////////////////////////////
    2                                                //END USER LICENCE AGREEMENT                                                    //
    3                                                //                                                                              //
    4                                                //Copyright (c) 2012, ARM All rights reserved.                                  //
    5                                                //                                                                              //
    6                                                //THIS END USER LICENCE AGREEMENT (�LICENCE�) IS A LEGAL AGREEMENT BETWEEN      //
    7                                                //YOU AND ARM LIMITED ("ARM") FOR THE USE OF THE SOFTWARE EXAMPLE ACCOMPANYING  //
    8                                                //THIS LICENCE. ARM IS ONLY WILLING TO LICENSE THE SOFTWARE EXAMPLE TO YOU ON   //
    9                                                //CONDITION THAT YOU ACCEPT ALL OF THE TERMS IN THIS LICENCE. BY INSTALLING OR  //
    10                                               //OTHERWISE USING OR COPYING THE SOFTWARE EXAMPLE YOU INDICATE THAT YOU AGREE   //
    11                                               //TO BE BOUND BY ALL OF THE TERMS OF THIS LICENCE. IF YOU DO NOT AGREE TO THE   //
    12                                               //TERMS OF THIS LICENCE, ARM IS UNWILLING TO LICENSE THE SOFTWARE EXAMPLE TO    //
    13                                               //YOU AND YOU MAY NOT INSTALL, USE OR COPY THE SOFTWARE EXAMPLE.                //
    14                                               //                                                                              //
    15                                               //ARM hereby grants to you, subject to the terms and conditions of this Licence,//
    16                                               //a non-exclusive, worldwide, non-transferable, copyright licence only to       //
    17                                               //redistribute and use in source and binary forms, with or without modification,//
    18                                               //for academic purposes provided the following conditions are met:              //
    19                                               //a) Redistributions of source code must retain the above copyright notice, this//
    20                                               //list of conditions and the following disclaimer.                              //
    21                                               //b) Redistributions in binary form must reproduce the above copyright notice,  //
    22                                               //this list of conditions and the following disclaimer in the documentation     //
    23                                               //and/or other materials provided with the distribution.                        //
    24                                               //                                                                              //
    25                                               //THIS SOFTWARE EXAMPLE IS PROVIDED BY THE COPYRIGHT HOLDER "AS IS" AND ARM     //
    26                                               //EXPRESSLY DISCLAIMS ANY AND ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING     //
    27                                               //WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR //
    28                                               //PURPOSE, WITH RESPECT TO THIS SOFTWARE EXAMPLE. IN NO EVENT SHALL ARM BE LIABLE/
    29                                               //FOR ANY DIRECT, INDIRECT, INCIDENTAL, PUNITIVE, OR CONSEQUENTIAL DAMAGES OF ANY/
    30                                               //KIND WHATSOEVER WITH RESPECT TO THE SOFTWARE EXAMPLE. ARM SHALL NOT BE LIABLE //
    31                                               //FOR ANY CLAIMS, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, //
    32                                               //TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE    //
    33                                               //EXAMPLE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE EXAMPLE. FOR THE AVOIDANCE/
    34                                               // OF DOUBT, NO PATENT LICENSES ARE BEING LICENSED UNDER THIS LICENSE AGREEMENT.//
    35                                               //////////////////////////////////////////////////////////////////////////////////
    36                                               
    37                                               
    38                                               module UART_RX(
    39                                                 input wire clk,
    40                                                 input wire resetn,
    41                                                 input wire b_tick,        //Baud generator tick
    42                                                 input wire rx,            //RS-232 data port
    43                                                 output reg rx_done,       //transfer completed
    44                                                 output wire [8:0] dout    //output data
    45                                                 );
    46                                               
    47                                               //STATE DEFINES  
    48                                                 localparam [1:0] idle_st = 2'b00;
    49                                                 localparam [1:0] start_st = 2'b01;
    50                                                 localparam [1:0] data_st = 2'b11;
    51                                                 localparam [1:0] stop_st = 2'b10;
    52                                               
    53                                               //Internal Signals  
    54                                                 reg [1:0] current_state;
    55                                                 reg [1:0] next_state;
    56                                                 reg [3:0] b_reg; //baud-rate/over sampling counter
    57                                                 reg [3:0] b_next;
    58                                                 reg [3:0] count_reg; //data-bit counter
    59                                                 reg [3:0] count_next;
    60                                                 reg [8:0] data_reg; //data register
    61                                                 reg [8:0] data_next;
    62                                                 
    63                                               //State Machine  
    64              1                     338003       always @ (posedge clk, negedge resetn)
    65                                                 begin
    66                                                   if(!resetn)
    67                                                     begin
    68              1                          2             current_state <= idle_st;
    69              1                          2             b_reg <= 0;
    70              1                          2             count_reg <= 0;
    71              1                          2             data_reg <=0;
    72                                                     end
    73                                                   else
    74                                                     begin
    75              1                     338001             current_state <= next_state;
    76              1                     338001             b_reg <= b_next;
    77              1                     338001             count_reg <= count_next;
    78              1                     338001             data_reg <= data_next;
    79                                                     end
    80                                                 end
    81                                               
    82                                               //Next State Logic 
    83              1                     358018       always @*
    84                                                 begin
    85              1                     358018         next_state = current_state;
    86              1                     358018         b_next = b_reg;
    87              1                     358018         count_next = count_reg;
    88              1                     358018         data_next = data_reg;
    89              1                     358018         rx_done = 1'b0;
    90                                                       
    91                                                   case(current_state)
    92                                                     idle_st:
    93                                                       if(~rx)
    94                                                         begin
    95              1                       1000                 next_state = start_st;
    96              1                       1000                 b_next = 0;
    97                                                         end
    98                                                         
    99                                                     start_st:
    100                                                      if(b_tick)
    101                                                        if(b_reg == 7)
    102                                                          begin
    103             1                       1000                   next_state = data_st;
    104             1                       1000                   b_next = 0;
    105             1                       1000                   count_next = 0;
    106                                                          end
    107                                                        else
    108             1                       7000                 b_next = b_reg + 1'b1;
    109                                                          
    110                                                    data_st:
    111                                                      if(b_tick)
    112                                                        if(b_reg == 15)
    113                                                          begin
    114             1                       9000                   b_next = 0;
    115             1                       9000                   data_next = {rx, data_reg [8:1]};
    116                                                            if(count_next == 8) // 9 Data bits
    117             1                       1000                     next_state = stop_st;
    118                                                            else
    119             1                       8000                     count_next = count_reg + 1'b1;
    120                                                          end
    121                                                        else
    122             1                     139513                 b_next = b_reg + 1;
    123                                                          
    124                                                    stop_st:
    125                                                      if(b_tick)
    126                                                        if(b_reg == 15) //One stop bit
    127                                                          begin
    128             1                       1000                   next_state = idle_st;
    129             1                       1000                   rx_done = 1'b1;
    130                                                          end
    131                                                        else
    132             1                      15487                b_next = b_reg + 1;
    133                                                  endcase
    134                                                end
    135                                                
    136                                                
    137                                                assign dout = data_reg;
    138                                                
    139                                                
    140                                                
    141                                              endmodule

Branch Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Branches                        23        23         0    100.00

================================Branch Details================================

Branch Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/uart_rx.v --

------------------------------------IF Branch------------------------------------
    66                                    338003     Count coming in to IF
    66              1                          2         if(!resetn)
    73              1                     338001         else
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------CASE Branch------------------------------------
    91                                    358018     Count coming in to CASE
    92              1                      17017           idle_st:
    99              1                      16000           start_st:
    110             1                     292513           data_st:
    124             1                      32487           stop_st:
                                               1     All False Count
Branch totals: 5 hits of 5 branches = 100.00%

------------------------------------IF Branch------------------------------------
    93                                     17017     Count coming in to IF
    93              1                       1000             if(~rx)
                                           16017     All False Count
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    100                                    16000     Count coming in to IF
    100             1                       8000             if(b_tick)
                                            8000     All False Count
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    101                                     8000     Count coming in to IF
    101             1                       1000               if(b_reg == 7)
    107             1                       7000               else
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    111                                   292513     Count coming in to IF
    111             1                     148513             if(b_tick)
                                          144000     All False Count
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    112                                   148513     Count coming in to IF
    112             1                       9000               if(b_reg == 15)
    121             1                     139513               else
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    116                                     9000     Count coming in to IF
    116             1                       1000                   if(count_next == 8) // 9 Data bits
    118             1                       8000                   else
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    125                                    32487     Count coming in to IF
    125             1                      16487             if(b_tick)
                                           16000     All False Count
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    126                                    16487     Count coming in to IF
    126             1                       1000               if(b_reg == 15) //One stop bit
    131             1                      15487               else
Branch totals: 2 hits of 2 branches = 100.00%


Condition Coverage:
    Enabled Coverage            Active   Covered    Misses % Covered
    ----------------            ------      ----    ------ ---------
    FEC Condition Terms              4         4         0    100.00

================================Condition Details================================

Condition Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/uart_rx.v --

----------------Focused Condition View-------------------
Line       101 Item    1  (b_reg == 7)
Condition totals: 1 of 1 input term covered = 100.00%

----------------Focused Condition View-------------------
Line       112 Item    1  (b_reg == 15)
Condition totals: 1 of 1 input term covered = 100.00%

----------------Focused Condition View-------------------
Line       116 Item    1  (count_next == 8)
Condition totals: 1 of 1 input term covered = 100.00%

----------------Focused Condition View-------------------
Line       126 Item    1  (b_reg == 15)
Condition totals: 1 of 1 input term covered = 100.00%


FSM Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    FSMs                                                       83.33
        States                       4         4         0    100.00
        Transitions                  6         4         2     66.66

================================FSM Details================================

FSM Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/uart_rx.v --

FSM_ID: current_state
    Current State Object : current_state
    ----------------------
    State Value MapInfo :
    ---------------------
Line          State Name               Value
----          ----------               -----
  92             idle_st                   0
  99            start_st                   1
 110             data_st                   3
 124             stop_st                   2
    Covered States :
    ----------------
                   State           Hit_count
                   -----           ---------
                 idle_st                2003
                start_st               16000
                 data_st              288000
                 stop_st               32000
    Covered Transitions :
    ---------------------
Line            Trans_ID           Hit_count          Transition          
----            --------           ---------          ----------          
  95                   0                1000          idle_st -> start_st 
 103                   1                1000          start_st -> data_st 
 117                   3                1000          data_st -> stop_st  
 128                   5                1000          stop_st -> idle_st  
    Uncovered Transitions :
    -----------------------
Line            Trans_ID          Transition          
----            --------          ----------          
  68                   2          start_st -> idle_st 
  68                   4          data_st -> idle_st  


    Summary                     Active      Hits    Misses % Covered
    -------                     ------      ----    ------ ---------
        States                       4         4         0    100.00
        Transitions                  6         4         2     66.66
Toggle Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Toggle Bins                    104       103         1     99.03

================================Toggle Details================================

Toggle Coverage for File /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/uart_rx.v --

       Line                                   Node      1H->0L      0L->1H  "Coverage"
--------------------------------------------------------------------------------------
         40                                 resetn           0           1       50.00 

Total Node Count     =         52 
Toggled Node Count   =         51 
Untoggled Node Count =          1 

Toggle Coverage      =      99.03% (103 of 104 bins)

=================================================================================
=== File: /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/uart_tx.v
=================================================================================
Statement Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Stmts                           37        37         0    100.00

================================Statement Details================================

Statement Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/uart_tx.v --

    1                                                //////////////////////////////////////////////////////////////////////////////////
    2                                                //END USER LICENCE AGREEMENT                                                    //
    3                                                //                                                                              //
    4                                                //Copyright (c) 2012, ARM All rights reserved.                                  //
    5                                                //                                                                              //
    6                                                //THIS END USER LICENCE AGREEMENT (�LICENCE�) IS A LEGAL AGREEMENT BETWEEN      //
    7                                                //YOU AND ARM LIMITED ("ARM") FOR THE USE OF THE SOFTWARE EXAMPLE ACCOMPANYING  //
    8                                                //THIS LICENCE. ARM IS ONLY WILLING TO LICENSE THE SOFTWARE EXAMPLE TO YOU ON   //
    9                                                //CONDITION THAT YOU ACCEPT ALL OF THE TERMS IN THIS LICENCE. BY INSTALLING OR  //
    10                                               //OTHERWISE USING OR COPYING THE SOFTWARE EXAMPLE YOU INDICATE THAT YOU AGREE   //
    11                                               //TO BE BOUND BY ALL OF THE TERMS OF THIS LICENCE. IF YOU DO NOT AGREE TO THE   //
    12                                               //TERMS OF THIS LICENCE, ARM IS UNWILLING TO LICENSE THE SOFTWARE EXAMPLE TO    //
    13                                               //YOU AND YOU MAY NOT INSTALL, USE OR COPY THE SOFTWARE EXAMPLE.                //
    14                                               //                                                                              //
    15                                               //ARM hereby grants to you, subject to the terms and conditions of this Licence,//
    16                                               //a non-exclusive, worldwide, non-transferable, copyright licence only to       //
    17                                               //redistribute and use in source and binary forms, with or without modification,//
    18                                               //for academic purposes provided the following conditions are met:              //
    19                                               //a) Redistributions of source code must retain the above copyright notice, this//
    20                                               //list of conditions and the following disclaimer.                              //
    21                                               //b) Redistributions in binary form must reproduce the above copyright notice,  //
    22                                               //this list of conditions and the following disclaimer in the documentation     //
    23                                               //and/or other materials provided with the distribution.                        //
    24                                               //                                                                              //
    25                                               //THIS SOFTWARE EXAMPLE IS PROVIDED BY THE COPYRIGHT HOLDER "AS IS" AND ARM     //
    26                                               //EXPRESSLY DISCLAIMS ANY AND ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING     //
    27                                               //WITHOUT LIMITATION WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR //
    28                                               //PURPOSE, WITH RESPECT TO THIS SOFTWARE EXAMPLE. IN NO EVENT SHALL ARM BE LIABLE/
    29                                               //FOR ANY DIRECT, INDIRECT, INCIDENTAL, PUNITIVE, OR CONSEQUENTIAL DAMAGES OF ANY/
    30                                               //KIND WHATSOEVER WITH RESPECT TO THE SOFTWARE EXAMPLE. ARM SHALL NOT BE LIABLE //
    31                                               //FOR ANY CLAIMS, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, //
    32                                               //TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE    //
    33                                               //EXAMPLE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE EXAMPLE. FOR THE AVOIDANCE/
    34                                               // OF DOUBT, NO PATENT LICENSES ARE BEING LICENSED UNDER THIS LICENSE AGREEMENT.//
    35                                               //////////////////////////////////////////////////////////////////////////////////
    36                                               
    37                                               
    38                                               module UART_TX(
    39                                                 input wire clk,
    40                                                 input wire resetn,
    41                                                 input wire tx_start,        
    42                                                 input wire b_tick,          //baud rate tick
    43                                                 input wire [8:0] d_in,      //input data
    44                                                 output reg tx_done,         //transfer finished
    45                                                 output wire tx              //output data to RS-232
    46                                                 );
    47                                                 
    48                                                 
    49                                               //STATE DEFINES  
    50                                                 localparam [1:0] idle_st = 2'b00;
    51                                                 localparam [1:0] start_st = 2'b01;
    52                                                 localparam [1:0] data_st = 2'b11;
    53                                                 localparam [1:0] stop_st = 2'b10;
    54                                                 
    55                                               //Internal Signals  
    56                                                 reg [1:0] current_state;
    57                                                 reg [1:0] next_state;
    58                                                 reg [3:0] b_reg;          //baud tick counter
    59                                                 reg [3:0] b_next;
    60                                                 reg [3:0] count_reg;      //data bit counter
    61                                                 reg [3:0] count_next;
    62                                                 reg [8:0] data_reg;       //data register
    63                                                 reg [8:0] data_next;
    64                                                 reg tx_reg;               //output data reg
    65                                                 reg tx_next;
    66                                                 
    67                                               //State Machine  
    68              1                     359004       always @(posedge clk, negedge resetn)
    69                                                 begin
    70                                                   if(!resetn)
    71                                                     begin
    72              1                          2             current_state <= idle_st;
    73              1                          2             b_reg <= 0;
    74              1                          2             count_reg <= 0;
    75              1                          2             data_reg <= 0;
    76              1                          2             tx_reg <= 1'b1;
    77                                                     end
    78                                                   else
    79                                                     begin
    80              1                     359002             current_state <= next_state;
    81              1                     359002             b_reg <= b_next;
    82              1                     359002             count_reg <= count_next;
    83              1                     359002             data_reg <= data_next;
    84              1                     359002             tx_reg <= tx_next;
    85                                                      end
    86                                                 end
    87                                               
    88                                               
    89                                               //Next State Logic  
    90              1                     359018       always @*
    91                                                 begin
    92              1                     359018         next_state = current_state;
    93              1                     359018         tx_done = 1'b0;
    94              1                     359018         b_next = b_reg;
    95              1                     359018         count_next = count_reg;
    96              1                     359018         data_next = data_reg;
    97              1                     359018         tx_next = tx_reg;
    98                                                   
    99                                                   case(current_state)
    100                                                    idle_st:
    101                                                    begin
    102             1                       1018             tx_next = 1'b1;
    103                                                      if(tx_start)
    104                                                      begin
    105             1                       1000               next_state = start_st;
    106             1                       1000               b_next = 0;
    107             1                       1000               data_next = d_in;
    108                                                      end
    109                                                    end
    110                                                    
    111                                                    start_st: //send start bit
    112                                                    begin
    113             1                      33000             tx_next = 1'b0;
    114                                                      if(b_tick)
    115                                                        if(b_reg==15)
    116                                                          begin
    117             1                       1000                   next_state = data_st;
    118             1                       1000                   b_next = 0;
    119             1                       1000                   count_next = 0;
    120                                                          end
    121                                                        else
    122             1                      15000                 b_next = b_reg + 1;
    123                                                    end
    124                                                    
    125                                                    data_st: //send data serially
    126                                                    begin
    127             1                     292513             tx_next = data_reg[0];
    128                                                      
    129                                                      if(b_tick)
    130                                                        if(b_reg == 15)
    131                                                          begin
    132             1                       9000                   b_next = 0;
    133             1                       9000                   data_next = data_reg >> 1;
    134                                                            if(count_reg == 8)    //9 data bits
    135             1                       1000                     next_state = stop_st;
    136                                                            else
    137             1                       8000                     count_next = count_reg + 1;
    138                                                          end
    139                                                        else
    140             1                     135000                 b_next = b_reg + 1;
    141                                                    end
    142                                                    
    143                                                    stop_st: //send stop bit
    144                                                    begin
    145             1                      32487             tx_next = 1'b1;
    146                                                      if(b_tick)
    147                                                        if(b_reg == 15)   //one stop bit
    148                                                          begin
    149             1                       1000                   next_state = idle_st;
    150             1                       1000                   tx_done = 1'b1;
    151                                                          end
    152                                                        else
    153             1                      15000                 b_next = b_reg + 1;
    154                                                    end
    155                                                  endcase
    156                                                end
    157                                                
    158                                                assign tx = tx_reg;
    159                                                
    160                                              endmodule
    161                                              
    162                                              
    163                                              
    164                                              ////this is just to confirm that tx works for sanity
    165                                              
    166                                              module uart_tx_mini_test();
    167                                              
    168                                              reg clk = 0;
    169                                              reg b_tick = 0;
    170                                              reg tx_start;
    171                                              reg resetn;
    172                                              reg poo = 0;
    173                                              
    174                                              wire tx_done;
    175                                              wire tx;
    176                                              
    177                                                  
    178                                                  always #10 clk = ~clk; 
    179                                                  always #20 b_tick = ~b_tick;
    180                                                  always #320 poo = ~poo;
    181                                              
    182                                              UART_TX uUART_TX(
    183                                              .clk(clk),
    184                                              .b_tick(b_tick),
    185                                              .tx_start(tx_start),
    186                                              .resetn(resetn),
    187                                              .d_in(9'b011101111),
    188                                              .tx_done(tx_done),
    189                                              .tx(tx)
    190                                              );
    191                                              
    192                                                initial begin
    193                                              
    194                                                      clk <= 0;
    195                                                      resetn <= 0;
    196                                                      tx_start <= 0;
    197                                                      #40 resetn <= 1;
    198                                                      @(posedge clk) tx_start <= 1;
    199                                                      #10000;
    200                                                       $stop;
    201                                                end
    202                                              
    203                                              endmodule

Branch Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Branches                        23        22         1     95.65

================================Branch Details================================

Branch Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/uart_tx.v --

------------------------------------IF Branch------------------------------------
    70                                    359004     Count coming in to IF
    70              1                          2         if(!resetn)
    78              1                     359002         else
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------CASE Branch------------------------------------
    99                                    359018     Count coming in to CASE
    100             1                       1018           idle_st:
    111             1                      33000           start_st: //send start bit
    125             1                     292513           data_st: //send data serially
    143             1                      32487           stop_st: //send stop bit
                                         ***0***     All False Count
Branch totals: 4 hits of 5 branches = 80.00%

------------------------------------IF Branch------------------------------------
    103                                     1018     Count coming in to IF
    103             1                       1000             if(tx_start)
                                              18     All False Count
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    114                                    33000     Count coming in to IF
    114             1                      16000             if(b_tick)
                                           17000     All False Count
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    115                                    16000     Count coming in to IF
    115             1                       1000               if(b_reg==15)
    121             1                      15000               else
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    129                                   292513     Count coming in to IF
    129             1                     144000             if(b_tick)
                                          148513     All False Count
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    130                                   144000     Count coming in to IF
    130             1                       9000               if(b_reg == 15)
    139             1                     135000               else
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    134                                     9000     Count coming in to IF
    134             1                       1000                   if(count_reg == 8)    //9 data bits
    136             1                       8000                   else
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    146                                    32487     Count coming in to IF
    146             1                      16000             if(b_tick)
                                           16487     All False Count
Branch totals: 2 hits of 2 branches = 100.00%

------------------------------------IF Branch------------------------------------
    147                                    16000     Count coming in to IF
    147             1                       1000               if(b_reg == 15)   //one stop bit
    152             1                      15000               else
Branch totals: 2 hits of 2 branches = 100.00%


Condition Coverage:
    Enabled Coverage            Active   Covered    Misses % Covered
    ----------------            ------      ----    ------ ---------
    FEC Condition Terms              4         4         0    100.00

================================Condition Details================================

Condition Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/uart_tx.v --

----------------Focused Condition View-------------------
Line       115 Item    1  (b_reg == 15)
Condition totals: 1 of 1 input term covered = 100.00%

----------------Focused Condition View-------------------
Line       130 Item    1  (b_reg == 15)
Condition totals: 1 of 1 input term covered = 100.00%

----------------Focused Condition View-------------------
Line       134 Item    1  (count_reg == 8)
Condition totals: 1 of 1 input term covered = 100.00%

----------------Focused Condition View-------------------
Line       147 Item    1  (b_reg == 15)
Condition totals: 1 of 1 input term covered = 100.00%


FSM Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    FSMs                                                       83.33
        States                       4         4         0    100.00
        Transitions                  6         4         2     66.66

================================FSM Details================================

FSM Coverage for file /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/uart_tx.v --

FSM_ID: current_state
    Current State Object : current_state
    ----------------------
    State Value MapInfo :
    ---------------------
Line          State Name               Value
----          ----------               -----
 100             idle_st                   0
 111            start_st                   1
 125             data_st                   3
 143             stop_st                   2
    Covered States :
    ----------------
                   State           Hit_count
                   -----           ---------
                 idle_st                1004
                start_st               33000
                 data_st              292513
                 stop_st               32487
    Covered Transitions :
    ---------------------
Line            Trans_ID           Hit_count          Transition          
----            --------           ---------          ----------          
 105                   0                1000          idle_st -> start_st 
 117                   1                1000          start_st -> data_st 
 135                   3                1000          data_st -> stop_st  
 149                   5                1000          stop_st -> idle_st  
    Uncovered Transitions :
    -----------------------
Line            Trans_ID          Transition          
----            --------          ----------          
  72                   2          start_st -> idle_st 
  72                   4          data_st -> idle_st  


    Summary                     Active      Hits    Misses % Covered
    -------                     ------      ----    ------ ---------
        States                       4         4         0    100.00
        Transitions                  6         4         2     66.66
Toggle Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Toggle Bins                    110       109         1     99.09

================================Toggle Details================================

Toggle Coverage for File /home/es5017/nfshome/hwcw2/UART_files/rtl/ahb_uart/uart_tx.v --

       Line                                   Node      1H->0L      0L->1H  "Coverage"
--------------------------------------------------------------------------------------
         40                                 resetn           0           1       50.00 

Total Node Count     =         55 
Toggled Node Count   =         54 
Untoggled Node Count =          1 

Toggle Coverage      =      99.09% (109 of 110 bins)

=================================================================================
=== File: /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_environment.sv
=================================================================================
Statement Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Stmts                           44        44         0    100.00

================================Statement Details================================

Statement Coverage for file /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_environment.sv --

    1                                                import ahb_uart_pkg::*; //have to import * - importing each one manually gives errors about not being able to find it
    2                                                
    3                                                class ahb_uart_environment;
    4                                                    ahb_uart_generator gen;
    5                                                
    6                                                    ahb_uart_tx_scoreboard tx_scb;
    7                                                    ahb_uart_rx_scoreboard rx_scb;
    8                                                    ahb_uart_tx_monitor tx_mon;
    9                                                    ahb_uart_rx_monitor rx_mon;
    10                                                   ahb_uart_tx_driver tx_drv;
    11                                                   
    12                                               
    13                                                   mailbox tx_scb_mbx;
    14                                                   mailbox rx_scb_mbx;
    15                                                   mailbox drv_mbx;
    16                                               
    17                                                   mailbox tx_tr_mbx; // tx transactions tht we can get corresponding input data from
    18                                                   mailbox rx_tr_mbx; // rx transactions ""
    19                                               
    20                                                   mailbox num_outstanding_tests; //so we can finish after all tests have completed
    21                                               
    22                                                   virtual ahb_uart_if vif;
    23                                                   event tx_drv_done;
    24                                               
    25                                                   function new();
    26              1                          1             tx_mon = new;
    27              1                          1             tx_drv = new;
    28              1                          1             tx_scb = new;
    29              1                          1             rx_scb = new;
    30              1                          1             rx_mon = new;
    31              1                          1             gen = new;
    32              1                          1             tx_scb_mbx = new();
    33              1                          1             rx_scb_mbx = new();
    34              1                          1             drv_mbx = new();
    35              1                          1             tx_tr_mbx = new();
    36              1                          1             rx_tr_mbx = new();
    37              1                          1             num_outstanding_tests = new();
    38                                               
    39              1                          1             gen.drv_mbx = drv_mbx;
    40              1                          1             gen.drv_done = tx_drv_done;
    41                                               
    42              1                          1             tx_mon.scb_mbx = tx_scb_mbx;
    43              1                          1             tx_scb.scb_mbx = tx_scb_mbx;
    44              1                          1             tx_drv.drv_mbx = drv_mbx;
    45              1                          1             tx_drv.drv_done = tx_drv_done;
    46              1                          1             tx_drv.tx_tr_mbx = tx_tr_mbx;
    47              1                          1             tx_mon.tx_tr_mbx = tx_tr_mbx;
    48                                                       
    49              1                          1             tx_mon.rx_tr_mbx = rx_tr_mbx;
    50              1                          1             rx_mon.rx_tr_mbx = rx_tr_mbx;
    51                                               
    52              1                          1             rx_scb.scb_mbx = rx_scb_mbx;
    53              1                          1             rx_mon.scb_mbx = rx_scb_mbx;
    54                                               
    55              1                          1             tx_scb.num_outstanding_tests = num_outstanding_tests;
    56              1                          1             rx_scb.num_outstanding_tests = num_outstanding_tests;
    57              1                          1             gen.num_outstanding_tests = num_outstanding_tests;
    58                                               
    59                                                   endfunction
    60                                               
    61                                                   virtual task run();
    62              1                          1             tx_drv.vif = vif;
    63              1                          1             tx_mon.vif = vif;
    64              1                          1             tx_scb.vif = vif;
    65              1                          1             rx_mon.vif = vif;
    66              1                          1             rx_scb.vif = vif;
    67                                               
    68                                                       fork
    69              1                          1                 gen.run(); 
    70              1                          1                 tx_mon.run();
    71              1                          1                 rx_mon.run();
    72              1                          1                 tx_drv.run();
    73              1                          1                 tx_scb.run();
    74              1                          1                 rx_scb.run();
    75                                                       join_any
    76                                                       
    77              1                          1             #40;
    78                                               
    79                                                       //wait until all tests have complete
    80              1                      86326             while (num_outstanding_tests.num() !=0 ) 
    81                                                           begin
    82              1                      86325                     @ (posedge vif.clk); 
    83              1                      86325                     #100;
    84                                                               // $display ("num_outstanding_tests.num() %0d", num_outstanding_tests.num());
    85                                                           end
    86                                                       
    87                                               
    88                                                       // #0.05s; //so it shows after all the tests are actually finished
    89                                               
    90                                                       //TODO: - fork join any for rx AFTER the tx is done. theerofre we can reuse the vif and the gen...do it here as well after the artificial delay so we can guarantee it runs only after
    91                                               
    92              1                          1             $display ("T=%0t Tx Num tests passed: %0d | Num tests failed: %0d", $time, tx_scb.num_passed, tx_scb.num_failed);
    93                                               
    94              1                          1             $display ("T=%0t Rx Num tests passed: %0d | Num tests failed: %0d", $time, rx_scb.num_passed, rx_scb.num_failed);
    95                                                       
    96                                               
    97                                                   endtask
    98                                               endclass

Condition Coverage:
    Enabled Coverage            Active   Covered    Misses % Covered
    ----------------            ------      ----    ------ ---------
    FEC Condition Terms              1         1         0    100.00

================================Condition Details================================

Condition Coverage for file /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_environment.sv --

----------------Focused Condition View-------------------
Line       80 Item    1  (this.num_outstanding_tests.num() != 0)
Condition totals: 1 of 1 input term covered = 100.00%



=================================================================================
=== File: /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_generator.sv
=================================================================================
Statement Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Stmts                           10        10         0    100.00

================================Statement Details================================

Statement Coverage for file /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_generator.sv --

    1                                                import ahb_uart_pkg::ahb_uart_transaction;
    2                                                
    3                                                class ahb_uart_generator
    4                                                #(parameter NUM_TESTS=1000) 
    5                                                ;
    6                                                    mailbox drv_mbx;
    7                                                    mailbox num_outstanding_tests;
    8                                                    event drv_done;
    9                                                     
    10                                                   task run();
    11              1                          1             for (int i = 0; i < NUM_TESTS; i++) begin
    11              2                       1000     
    12              1                       1000                 ahb_uart_transaction tr = new;
    13              1                       1000                 void'(tr.randomize());
    14              1                       1000                 tr.test_id = i;
    15              1                       1000                 $display ("T=%0t [Generator] Created transaction at index %0d", $time, i);
    16              1                       1000                 drv_mbx.put(tr);
    17              1                       1000                 num_outstanding_tests.put(1);
    18              1                       1000                 @(drv_done);
    19                                                       end
    20              1                          1             $display ("T=%0t [Generator] Done generation of %0d transactions", $time, NUM_TESTS);
    21                                                   endtask
    22                                               endclass


=================================================================================
=== File: /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_interface.sv
=================================================================================
Toggle Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Toggle Bins                    258       153       105     59.30

================================Toggle Details================================

Toggle Coverage for File /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_interface.sv --

       Line                                   Node      1H->0L      0L->1H  "Coverage"
--------------------------------------------------------------------------------------
          2                                HRESETn           0           1       50.00 
          3                               HADDR[7]           0           0        0.00 
          3                               HADDR[6]           0           0        0.00 
          3                               HADDR[5]           0           0        0.00 
          3                               HADDR[4]           0           0        0.00 
          3                               HADDR[3]           0           0        0.00 
          3                               HADDR[2]           0           0        0.00 
          3                               HADDR[1]           0           0        0.00 
          3                               HADDR[0]           0           0        0.00 
          4                              HTRANS[0]           0           0        0.00 
          7                                 HREADY           0           0        0.00 
         10                              HRDATA[9]           0           0        0.00 
         10                              HRDATA[8]           0           0        0.00 
         10                             HRDATA[31]           0           0        0.00 
         10                             HRDATA[30]           0           0        0.00 
         10                             HRDATA[29]           0           0        0.00 
         10                             HRDATA[28]           0           0        0.00 
         10                             HRDATA[27]           0           0        0.00 
         10                             HRDATA[26]           0           0        0.00 
         10                             HRDATA[25]           0           0        0.00 
         10                             HRDATA[24]           0           0        0.00 
         10                             HRDATA[23]           0           0        0.00 
         10                             HRDATA[22]           0           0        0.00 
         10                             HRDATA[21]           0           0        0.00 
         10                             HRDATA[20]           0           0        0.00 
         10                             HRDATA[19]           0           0        0.00 
         10                             HRDATA[18]           0           0        0.00 
         10                             HRDATA[17]           0           0        0.00 
         10                             HRDATA[16]           0           0        0.00 
         10                             HRDATA[15]           0           0        0.00 
         10                             HRDATA[14]           0           0        0.00 
         10                             HRDATA[13]           0           0        0.00 
         10                             HRDATA[12]           0           0        0.00 
         10                             HRDATA[11]           0           0        0.00 
         10                             HRDATA[10]           0           0        0.00 
         25                           baud_rate[9]           0           0        0.00 
         25                           baud_rate[8]           0           0        0.00 
         25                           baud_rate[7]           0           0        0.00 
         25                           baud_rate[6]           0           0        0.00 
         25                           baud_rate[5]           0           0        0.00 
         25                           baud_rate[4]           0           0        0.00 
         25                           baud_rate[3]           0           0        0.00 
         25                           baud_rate[2]           0           0        0.00 
         25                           baud_rate[1]           0           0        0.00 
         25                          baud_rate[17]           0           0        0.00 
         25                          baud_rate[16]           0           0        0.00 
         25                          baud_rate[15]           0           0        0.00 
         25                          baud_rate[14]           0           0        0.00 
         25                          baud_rate[13]           0           0        0.00 
         25                          baud_rate[12]           0           0        0.00 
         25                          baud_rate[11]           0           0        0.00 
         25                          baud_rate[10]           0           0        0.00 
         25                           baud_rate[0]           0           0        0.00 

Total Node Count     =        129 
Toggled Node Count   =         76 
Untoggled Node Count =         53 

Toggle Coverage      =      59.30% (153 of 258 bins)

=================================================================================
=== File: /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_rx_monitor.sv
=================================================================================
Statement Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Stmts                           14        14         0    100.00

================================Statement Details================================

Statement Coverage for file /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_rx_monitor.sv --

    1                                                import ahb_uart_pkg::ahb_uart_transaction;
    2                                                
    3                                                //this class monitors the output on the tx line of the uart
    4                                                class ahb_uart_rx_monitor
    5                                                #(parameter TX_OUT_SIZE=11) //number of bits in tx output including start and stop and parity
    6                                                ;
    7                                                    virtual ahb_uart_if vif;
    8                                                    mailbox scb_mbx;
    9                                                    mailbox rx_tr_mbx;
    10                                                
    11                                                
    12                                                   task run();
    13              1                          1             $display ("T=%0t [Monitor] Monitor is starting...", $time);
    14              1                          1             forever begin
    15                                                           ahb_uart_transaction t;
    16                                                           logic [7:0] d_out;
    17              1                   28687308                 @ (posedge vif.clk);
    18                                                           
    19                                                           //only try and read if we are not currently writing
    20                                                           if (~vif.HWRITE && vif.uart_irq) begin                
    21              1                       1000                     vif.HTRANS <= 2'b10;
    22              1                       1000                     vif.HREADY <= 1'b1;
    23              1                       1000                     vif.HSEL <= 1'b1;         
    24              1                       1000                     d_out = vif.HRDATA;
    25              1                       1000                     @(posedge vif.clk);
    26              1                       1000                     vif.HSEL <= 1'b0;
    27              1                       1000                     vif.HTRANS <= 2'b00; 
    28              1                       1000                     rx_tr_mbx.get(t);   
    29              1                       1000                     t.HRDATA = d_out;
    30              1                       1000                     scb_mbx.put(t);
    31              1                       1000                     @(posedge vif.clk);             
    32                                                            end        
    33                                                       end
    34                                                       
    35                                                   endtask
    36                                               endclass

Branch Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Branches                         2         2         0    100.00

================================Branch Details================================

Branch Coverage for file /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_rx_monitor.sv --

------------------------------------IF Branch------------------------------------
    20                                  28687307     Count coming in to IF
    20              1                       1000                 if (~vif.HWRITE && vif.uart_irq) begin                
                                        28686307     All False Count
Branch totals: 2 hits of 2 branches = 100.00%


Condition Coverage:
    Enabled Coverage            Active   Covered    Misses % Covered
    ----------------            ------      ----    ------ ---------
    FEC Condition Terms              2         2         0    100.00

================================Condition Details================================

Condition Coverage for file /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_rx_monitor.sv --

----------------Focused Condition View-------------------
Line       20 Item    1  (~this.vif.HWRITE && this.vif.uart_irq)
Condition totals: 2 of 2 input terms covered = 100.00%



=================================================================================
=== File: /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_rx_scoreboard.sv
=================================================================================
Statement Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Stmts                           18        13         5     72.22

================================Statement Details================================

Statement Coverage for file /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_rx_scoreboard.sv --

    1                                                import ahb_uart_pkg::ahb_uart_transaction;
    2                                                
    3                                                class ahb_uart_rx_scoreboard;
    4                                                    mailbox scb_mbx;
    5                                                    mailbox num_outstanding_tests;
    6                                                    virtual ahb_uart_if vif;
    7               1                          1         int num_passed = 0;
    8               1                          1         int num_failed = 0;
    9                                                
    10                                                       covergroup cg with function sample(ahb_uart_transaction t);
    11                                                       
    12                                                       even_odd_d_in: coverpoint ^t.HRDATA[7:0] {
    13                                                           bins even = {0};
    14                                                           bins odd = {1};
    15                                                       }
    16                                               
    17                                                       even_odd_parity: coverpoint t.PARITYSEL {
    18                                                           bins odd_parity = {1};
    19                                                           bins even_parity = {0};
    20                                                       }
    21                                               
    22                                                       parity_fault_injection: coverpoint t.parity_fault_injection {
    23                                                           bins no_fault_inj = {0};
    24                                                           bins fault_inj = {1};
    25                                                       }
    26                                                       
    27                                                       range_HRDATA_vals: coverpoint t.HRDATA[7:0] {        
    28                                                           bins lo = {[0:63]};
    29                                                           bins med_lo = {[64:127]};
    30                                                           bins med_hi = {[128:191]};
    31                                                           bins hi = {[192:255]};
    32                                                       }
    33                                               
    34                                                       all: cross range_HRDATA_vals, even_odd_parity, even_odd_d_in, parity_fault_injection;
    35                                               
    36                                                   endgroup
    37                                               
    38                                                   function new();
    39              1                          1             cg = new();
    40                                                   endfunction
    41                                               
    42                                                   task run();
    43              1                          1             forever begin
    44                                                           ahb_uart_transaction t;
    45                                                           int ignore;
    46              1                       1001                 scb_mbx.get(t);
    47              1                       1000                 t.print("Rx Scoreboard");
    48              1                       1000                 cg.sample(t);
    49                                                           if (check_data(t) && check_parity(t))
    50                                                           begin
    51              1                       1000                     num_passed = num_passed + 1;
    52                                                           end else begin
    53              1                    ***0***                     num_failed = num_failed + 1;
    54                                                           end
    55              1                       1000                 num_outstanding_tests.get(ignore);
    56                                                           
    57                                                       end
    58                                                   endtask
    59                                               
    60                                                   function bit check_data(ahb_uart_transaction t);
    61                                                       if (t.HWDATA[7:0] == t.HRDATA[7:0]) begin  
    62              1                       1000                 $display("[Rx scb] PASS! Input data bits %d is equal to output data vector %d",t.RsTx_data[7:0],  t.HRDATA[7:0]);
    63              1                       1000                 return 1'b1;
    64                                                       end else begin
    65              1                    ***0***                 $display("[Rx scb] FAIL! Input data bits %d is NOT equal to output data vector %d",t.RsTx_data[7:0], t.HRDATA[7:0]);
    66              1                    ***0***                 return 1'b0;
    67                                                       end
    68                                                   endfunction
    69                                               
    70                                                   function bit check_parity(ahb_uart_transaction t);
    71                                                        //we check for even parity (set in tb top initial block)
    72                                                       //there should be an even number of 1s for even parity, hence xoring them would give 0
    73                                                       if (~t.PARITYERR) begin  
    74              1                       1000                 $display("[Rx scb] PASS! Parity bit %b is correct for data: %b, PARITYSEL: %b, parity_fault_injection: %b", t.RsTx_data[8], t.HRDATA[7:0], t.PARITYSEL, t.parity_fault_injection);
    75              1                       1000                 return 1'b1;
    76                                                       end else begin
    77              1                    ***0***                 $display("[Rx scb] FAIL! Parity bit %b is not correct for data: %b, PARITYSEL: %b, parity_fault_injection: %b", t.RsTx_data[8], t.HRDATA[7:0], t.PARITYSEL, t.parity_fault_injection);
    78              1                    ***0***                 return 1'b0;
    79                                                       end
    80                                                   endfunction
    81                                               endclass

Branch Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Branches                         6         3         3     50.00

================================Branch Details================================

Branch Coverage for file /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_rx_scoreboard.sv --

------------------------------------IF Branch------------------------------------
    49                                      1000     Count coming in to IF
    49              1                       1000                 if (check_data(t) && check_parity(t))
    52              1                    ***0***                 end else begin
Branch totals: 1 hit of 2 branches = 50.00%

------------------------------------IF Branch------------------------------------
    61                                      1000     Count coming in to IF
    61              1                       1000             if (t.HWDATA[7:0] == t.HRDATA[7:0]) begin  
    64              1                    ***0***             end else begin
Branch totals: 1 hit of 2 branches = 50.00%

------------------------------------IF Branch------------------------------------
    73                                      1000     Count coming in to IF
    73              1                       1000             if (~t.PARITYERR) begin  
    76              1                    ***0***             end else begin
Branch totals: 1 hit of 2 branches = 50.00%


Condition Coverage:
    Enabled Coverage            Active   Covered    Misses % Covered
    ----------------            ------      ----    ------ ---------
    FEC Condition Terms              3         0         3      0.00

================================Condition Details================================

Condition Coverage for file /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_rx_scoreboard.sv --

----------------Focused Condition View-------------------
Line       49 Item    1  (check_data(this,t) && check_parity(this,t))
Condition totals: 0 of 2 input terms covered = 0.00%

            Input Term   Covered  Reason for no coverage   Hint
           -----------  --------  -----------------------  --------------
    check_data(this,t)         N  '_0' not hit             Hit '_0'
  check_parity(this,t)         N  '_0' not hit             Hit '_0'

     Rows:       Hits  FEC Target              Non-masking condition(s)      
 ---------  ---------  --------------------    -------------------------     
  Row   1:    ***0***  check_data(this,t)_0    -                             
  Row   2:          1  check_data(this,t)_1    check_parity(this,t)          
  Row   3:    ***0***  check_parity(this,t)_0  check_data(this,t)            
  Row   4:          1  check_parity(this,t)_1  check_data(this,t)            

----------------Focused Condition View-------------------
Line       61 Item    1  (t.HWDATA[7:0] == t.HRDATA[7:0])
Condition totals: 0 of 1 input term covered = 0.00%

                        Input Term   Covered  Reason for no coverage   Hint
                       -----------  --------  -----------------------  --------------
  (t.HWDATA[7:0] == t.HRDATA[7:0])         N  '_0' not hit             Hit '_0'

     Rows:       Hits  FEC Target                          Non-masking condition(s)      
 ---------  ---------  --------------------                -------------------------     
  Row   1:    ***0***  (t.HWDATA[7:0] == t.HRDATA[7:0])_0  -                             
  Row   2:          1  (t.HWDATA[7:0] == t.HRDATA[7:0])_1  -                             



=================================================================================
=== File: /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_test.sv
=================================================================================
Statement Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Stmts                            2         2         0    100.00

================================Statement Details================================

Statement Coverage for file /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_test.sv --

    1                                                import ahb_uart_pkg::ahb_uart_environment;
    2                                                
    3                                                class ahb_uart_test;
    4                                                    ahb_uart_environment env;
    5                                                
    6                                                    function new();
    7               1                          1             env = new;
    8                                                     endfunction
    9                                                
    10                                                   task run();
    11              1                          1             env.run();
    12                                                   endtask     
    13                                               endclass


=================================================================================
=== File: /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_testbench.sv
=================================================================================
Statement Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Stmts                           13        13         0    100.00

================================Statement Details================================

Statement Coverage for file /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_testbench.sv --

    1                                                import ahb_uart_pkg::ahb_uart_test;
    2                                                
    3                                                module ahb_uart_testbench
    4                                                #(parameter BAUD_RATE=18'd19200)
    5                                                ;
    6                                                    reg clk;
    7                                                    reg baud_tick;
    8                                                
    9                                                    ahb_uart_if _if(clk, baud_tick);
    10                                               
    11              1                   57378619         always #10ns clk = ~clk; //50 mhz clock
    11              2                   57378618     
    12                                               
    13                                                   BAUDGEN 
    14                                                   #(.CLOCK_HZ(50_000_000))
    15                                                   uBAUDGEN(
    16                                                       .clk(clk),
    17                                                       .resetn(_if.HRESETn),
    18                                                       .baud_rate(BAUD_RATE),
    19                                                       .baudtick(baud_tick)
    20                                                   ); //used just so we can read the data at the correct rate in the tx monitor for eg
    21                                               
    22                                                   AHBUART DUT(
    23                                                       .HCLK(clk),
    24                                                       .HRESETn(_if.HRESETn),
    25                                                       .HADDR(_if.HADDR),
    26                                                       .HTRANS(_if.HTRANS),
    27                                                       .HWDATA(_if.HWDATA),
    28                                                       .HWRITE(_if.HWRITE),
    29                                                       .HREADY(_if.HREADY),
    30                                                       .HREADYOUT(_if.HREADYOUT),
    31                                                       .HRDATA(_if.HRDATA),
    32                                                       .HSEL(_if.HSEL),
    33                                                       .RsRx(_if.RsRx),
    34                                                       .RsTx(_if.RsTx),
    35                                                       .uart_irq(_if.uart_irq),
    36                                               
    37                                                       .PARITYSEL(_if.PARITYSEL),
    38                                                       .parity_fault_injection(_if.parity_fault_injection),
    39                                                       .PARITYERR(_if.PARITYERR)
    40                                                       );
    41                                               
    42                                                   initial begin
    43              1                          1             automatic ahb_uart_test t = new;        
    44                                               
    45              1                          1             $display ("T=%0t [Testbench] Testbench starting...", $time);
    46                                               
    47              1                          1             clk <= 0;
    48              1                          1             _if.HRESETn <= 0;
    49              1                          1             _if.RsRx <= 1'b1; //put on stop bit
    50              1                          1              #40 _if.HRESETn <= 1;
    50              2                          1     
    51                                                       
    52              1                          1             t.env.vif = _if;
    53                                                       fork
    54              1                          1                 t.run();            
    55                                                       join
    56                                               
    57                                               
    58              1                          1             $display ("T=%0t [Testbench] Testbench finishing...", $time);
    59              1                          1             $stop;
    60                                                   end
    61                                               endmodule

Toggle Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Toggle Bins                      4         4         0    100.00

================================Toggle Details================================

Toggle Coverage for File /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_testbench.sv --

       Line                                   Node      1H->0L      0L->1H  "Coverage"
--------------------------------------------------------------------------------------

Total Node Count     =          2 
Toggled Node Count   =          2 
Untoggled Node Count =          0 

Toggle Coverage      =     100.00% (4 of 4 bins)

=================================================================================
=== File: /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_transaction.sv
=================================================================================
Statement Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Stmts                            1         1         0    100.00

================================Statement Details================================

Statement Coverage for file /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_transaction.sv --

    1                                                class ahb_uart_transaction;
    2                                                
    3                                                    rand bit [31:0] HWDATA;
    4                                                    
    5                                                    rand bit [31:0] HADDR;
    6                                                    constraint HADDR_bottom_byte {HADDR[7:0] == 8'h00;}
    7                                                    
    8                                                    bit [31:0] HRDATA;
    9                                                    bit  [1:0]  HTRANS;
    10                                                   rand bit PARITYSEL;
    11                                                   bit PARITYERR;
    12                                                   rand bit parity_fault_injection;
    13                                                   constraint parity_fault_injection_dist {
    14                                                       parity_fault_injection dist {
    15                                                           0 :/ 90,
    16                                                           1 :/ 10 };
    17                                                   }
    18                                                   
    19                                                   bit [8:0] RsTx_data; //output data from tx wire after data has all gone through. includes parity
    20                                               
    21                                                   bit[31:0] test_id;
    22                                                   
    23                                               
    24                                                   function void print(string tag="");
    25              1                       3000             $display ("T=%0t [Transaction] (Tag: %s) HWDATA=0x%0h HADDR=0x%0h HRDATA=0x%0h", $time, tag, HWDATA, HADDR, HRDATA);
    26                                                   endfunction
    27                                               endclass
    28                                               
    29                                               
    30                                               //we can't have a different baud rate at different points in the same UART
    31                                                   // rand bit [17:0] baud_rate;
    32                                                   // constraint baud_rate_dist {
    33                                                   //     baud_rate dist {
    34                                                   //         110 :/ 7,
    35                                                   //         300 :/ 7,
    36                                                   //         600 :/ 7 
    37                                                   //         1200 :/ 7 
    38                                                   //         2400 :/ 7 
    39                                                   //         4800 :/ 7 
    40                                                   //         9600 :/ 7 
    41                                                   //         14400 :/ 7 
    42                                                   //         19200 :/ 7 
    43                                                   //         38400 :/ 7 
    44                                                   //         57600 :/ 7 
    45                                                   //         115200 :/ 7 
    46                                                   //         128000 :/ 8 
    47                                                   //         256000 :/ 8
    48                                                   //     };
    49                                                   // }


=================================================================================
=== File: /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_tx_driver.sv
=================================================================================
Statement Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Stmts                           25        25         0    100.00

================================Statement Details================================

Statement Coverage for file /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_tx_driver.sv --

    1                                                import ahb_uart_pkg::ahb_uart_transaction;
    2                                                
    3                                                
    4                                                //this drives input to the ahb from the cpu so that it gets transmitted
    5                                                class ahb_uart_tx_driver;
    6                                                    mailbox drv_mbx;
    7                                                    mailbox tx_tr_mbx;
    8                                                    event drv_done;
    9                                                    virtual ahb_uart_if vif;
    10                                               
    11                                                   task run();
    12              1                          1             $display ("T=%0t [Driver] Driver is starting...", $time);        
    13              1                          1             forever begin
    14                                                           ahb_uart_transaction t;
    15              1                       1001                 @(posedge vif.clk);
    16              1                       1001                 $display ("T=%0t [Driver] Driver waiting for item...", $time);
    17              1                       1001                 drv_mbx.get(t); //blocks until next item is present
    18              1                       1000                 tx_tr_mbx.put(t);
    19              1                       1000                 t.print("Driver");
    20              1                       1000                 $display ("Expected: %d (%b)", t.HWDATA[7:0], t.HWDATA[7:0]); //TODO: - remove
    21              1                       1000                 vif.HADDR <= t.HADDR;
    22              1                       1000                 vif.HTRANS <= 2'b10;
    23              1                       1000                 vif.HWRITE <= 1'b1;
    24              1                       1000                 vif.HREADY <= 1'b1;
    25              1                       1000                 vif.HSEL <= 1'b1;
    26              1                       1000                 vif.PARITYSEL <= t.PARITYSEL;
    27              1                       1000                 vif.parity_fault_injection <= t.parity_fault_injection;
    28              1                       1000                 @(posedge vif.clk);
    29              1                       1000                 vif.HWDATA <= t.HWDATA;
    30              1                       1000                 vif.HWRITE <= 1'b0;
    31              1                       1000                 vif.HSEL <= 1'b0;
    32              1                       1000                 vif.HTRANS <= 2'b00;            
    33                                                 
    34              1                       1000                 @(posedge vif.clk);
    35              1                       1000                 @(posedge vif.clk); //this posedge clock saved my life. without it everything breaks.
    36              1                   28254681                 while(~vif.HREADYOUT) @(posedge vif.clk); //wait for fifo to have space so we can start sending more
    36              2                   28253681     
    37              1                       1000                 ->drv_done; //now we know the ahb transmission is done, we can raise the drv_done event to signal for a new transaction to send over
    38                                               
    39                                                         end
    40                                                   endtask
    41                                               endclass


=================================================================================
=== File: /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_tx_monitor.sv
=================================================================================
Statement Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Stmts                           19        19         0    100.00

================================Statement Details================================

Statement Coverage for file /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_tx_monitor.sv --

    1                                                import ahb_uart_pkg::ahb_uart_transaction;
    2                                                
    3                                                
    4                                                
    5                                                //this class monitors the output on the tx line of the uart
    6                                                class ahb_uart_tx_monitor
    7                                                #(parameter TX_OUT_SIZE=11) //number of bits in tx output including start and stop and parity
    8                                                ;
    9                                                    virtual ahb_uart_if vif;
    10                                                   mailbox scb_mbx;
    11                                                   mailbox tx_tr_mbx;
    12                                                   mailbox rx_tr_mbx;
    13                                                
    14                                                
    15                                                   task run();
    16              1                          1             $display ("T=%0t [Monitor] Monitor is starting...", $time);
    17              1                          1             forever begin
    18              1                       5311                 @ (posedge vif.clk);
    19                                                           if (~vif.RsTx) begin //start bit is 0, stop bit is 1. when the tx start bit is 0 we know it has started transmitting,
    20                                                               ahb_uart_transaction t; 
    21                                                                
    22                                                               logic [TX_OUT_SIZE-3:0] d_out; //tx output with parity minus start and stop bits
    23                                                               logic [TX_OUT_SIZE-1:0] tx_out; //includes the start and stop bits - so 11 bits
    24              1                       1000                     tx_tr_mbx.get(t);
    25              1                       1000                     $display ("T=%0t [Monitor] Monitor processing item...", $time);
    26                                                               // @ (posedge vif.clk);
    27              1                       1000                     for (int i = 0; i < TX_OUT_SIZE; i++) begin //includes start and stop state
    27              2                      11000     
    28                                               
    29              1                      11000                         for (int j = 0; j < 8; j++) @ (posedge vif.baud_tick);
    29              2                      88000     
    29              3                      88000     
    30              1                      11000                         tx_out[i] = vif.RsTx; //sample it right in the middle of the oversample cycle so that it is the most stable it can be...otherwise it don't work
    31              1                      11000                         for (int j = 0; j < 8; j++) @ (posedge vif.baud_tick); //wait for 16 baud ticks because it's oversampled
    31              2                      88000     
    31              3                      88000     
    32              1                      11000                         vif.RsRx = vif.RsTx; //send the tx output directly back into the rx input
    33                                                                   
    34                                                                   
    35                                                               end //sample the output bits
    36                                               
    37              1                       1000                     d_out = tx_out[TX_OUT_SIZE-2:1]; //remove the start and stop bits
    38                                                               
    39                                                               // $display ("id: %d Actual: %d RealExpected: %d", t.test_id, d_out[7:0], t.HWDATA[7:0]); 
    40              1                       1000                     t.RsTx_data = d_out;
    41              1                       1000                     scb_mbx.put(t);
    42                                               
    43              1                       1000                     rx_tr_mbx.put(t); // put the transaction data in the rx mailbox so we can check against the inputs later
    44                                               
    45                                                              end
    46                                                       end
    47                                                       
    48                                                   endtask
    49                                               endclass

Branch Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Branches                         2         2         0    100.00

================================Branch Details================================

Branch Coverage for file /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_tx_monitor.sv --

------------------------------------IF Branch------------------------------------
    19                                      5310     Count coming in to IF
    19              1                       1000                 if (~vif.RsTx) begin //start bit is 0, stop bit is 1. when the tx start bit is 0 we know it has started transmitting,
                                            4310     All False Count
Branch totals: 2 hits of 2 branches = 100.00%



=================================================================================
=== File: /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_tx_scoreboard.sv
=================================================================================
Statement Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Stmts                           17        12         5     70.58

================================Statement Details================================

Statement Coverage for file /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_tx_scoreboard.sv --

    1                                                import ahb_uart_pkg::ahb_uart_transaction;
    2                                                
    3                                                
    4                                                class ahb_uart_tx_scoreboard;
    5                                                    mailbox scb_mbx;
    6                                                    mailbox num_outstanding_tests;
    7                                                    virtual ahb_uart_if vif;
    8               1                          1         int num_passed = 0;
    9               1                          1         int num_failed = 0;
    10                                               
    11                                                   covergroup cg with function sample(ahb_uart_transaction t);
    12                                                       
    13                                                       even_odd_d_in: coverpoint ^t.HWDATA[7:0] {
    14                                                           bins even = {0};
    15                                                           bins odd = {1};
    16                                                       }
    17                                               
    18                                                       even_odd_parity: coverpoint t.PARITYSEL {
    19                                                           bins odd_parity = {1};
    20                                                           bins even_parity = {0};
    21                                                       }
    22                                               
    23                                                       parity_fault_injection: coverpoint t.parity_fault_injection {
    24                                                           bins no_fault_inj = {0};
    25                                                           bins fault_inj = {1};
    26                                                       }
    27                                                       
    28                                                       range_HWDATA_vals: coverpoint t.HWDATA[7:0] {        
    29                                                           bins lo = {[0:63]};
    30                                                           bins med_lo = {[64:127]};
    31                                                           bins med_hi = {[128:191]};
    32                                                           bins hi = {[192:255]};
    33                                                       }
    34                                               
    35                                                       all: cross range_HWDATA_vals, even_odd_d_in, parity_fault_injection, even_odd_parity;
    36                                                   endgroup
    37                                               
    38                                                   function new();
    39              1                          1             cg = new();
    40                                                   endfunction
    41                                               
    42                                                   task run();
    43              1                          1             forever begin
    44                                                           ahb_uart_transaction t;
    45                                                           int ignore;
    46              1                       1001                 scb_mbx.get(t);
    47              1                       1000                 t.print("Tx Scoreboard");
    48              1                       1000                 cg.sample(t);
    49                                                           if (check_data(t) && check_parity(t))
    50                                                           begin
    51              1                       1000                     num_passed = num_passed + 1;
    52                                                           end else begin
    53              1                    ***0***                     num_failed = num_failed + 1;
    54                                                           end
    55                                                           // num_outstanding_tests.get(ignore); //done in rx
    56                                                           
    57                                                       end
    58                                                   endtask
    59                                               
    60                                                   function bit check_data(ahb_uart_transaction t);
    61                                                       if (t.RsTx_data[7:0] == t.HWDATA[7:0]) begin  
    62              1                       1000                 $display("[Tx scb] PASS! Input vector %d is equal to output data bits %d", t.HWDATA[7:0], t.RsTx_data[7:0]);
    63              1                       1000                 return 1'b1;
    64                                                       end else begin
    65              1                    ***0***                 $display("[Tx scb] FAIL! Input vector %d is NOT equal to output data bits %d", t.HWDATA[7:0], t.RsTx_data[7:0]);
    66              1                    ***0***                 return 1'b0;
    67                                                       end
    68                                                   endfunction
    69                                               
    70                                                   function bit check_parity(ahb_uart_transaction t);
    71                                                        //we check for even parity (set in tb top initial block)
    72                                                       //there should be an even number of 1s for even parity, hence xoring them would give 0
    73                                                       if ((~^t.RsTx_data[8:0]) ^ t.PARITYSEL ^ t.parity_fault_injection) begin  
    74              1                       1000                 $display("[Tx scb] PASS! Parity bit %b is correct for data: %b, PARITYSEL: %b, parity_fault_injection: %b", t.RsTx_data[8], t.RsTx_data[7:0], t.PARITYSEL, t.parity_fault_injection);
    75              1                       1000                 return 1'b1;
    76                                                       end else begin
    77              1                    ***0***                 $display("[Tx scb] FAIL! Parity bit %b is not correct for data: %b, PARITYSEL: %b, parity_fault_injection: %b", t.RsTx_data[8], t.RsTx_data[7:0], t.PARITYSEL, t.parity_fault_injection);
    78              1                    ***0***                 return 1'b0;
    79                                                       end
    80                                                   endfunction
    81                                               endclass

Branch Coverage:
    Enabled Coverage            Active      Hits    Misses % Covered
    ----------------            ------      ----    ------ ---------
    Branches                         6         3         3     50.00

================================Branch Details================================

Branch Coverage for file /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_tx_scoreboard.sv --

------------------------------------IF Branch------------------------------------
    49                                      1000     Count coming in to IF
    49              1                       1000                 if (check_data(t) && check_parity(t))
    52              1                    ***0***                 end else begin
Branch totals: 1 hit of 2 branches = 50.00%

------------------------------------IF Branch------------------------------------
    61                                      1000     Count coming in to IF
    61              1                       1000             if (t.RsTx_data[7:0] == t.HWDATA[7:0]) begin  
    64              1                    ***0***             end else begin
Branch totals: 1 hit of 2 branches = 50.00%

------------------------------------IF Branch------------------------------------
    73                                      1000     Count coming in to IF
    73              1                       1000             if ((~^t.RsTx_data[8:0]) ^ t.PARITYSEL ^ t.parity_fault_injection) begin  
    76              1                    ***0***             end else begin
Branch totals: 1 hit of 2 branches = 50.00%


Condition Coverage:
    Enabled Coverage            Active   Covered    Misses % Covered
    ----------------            ------      ----    ------ ---------
    FEC Condition Terms              6         0         6      0.00

================================Condition Details================================

Condition Coverage for file /home/es5017/nfshome/hwcw2/UART_files/tbench/ahb_uart_tb/ahb_uart_tx_scoreboard.sv --

----------------Focused Condition View-------------------
Line       49 Item    1  (check_data(this,t) && check_parity(this,t))
Condition totals: 0 of 2 input terms covered = 0.00%

            Input Term   Covered  Reason for no coverage   Hint
           -----------  --------  -----------------------  --------------
    check_data(this,t)         N  '_0' not hit             Hit '_0'
  check_parity(this,t)         N  '_0' not hit             Hit '_0'

     Rows:       Hits  FEC Target              Non-masking condition(s)      
 ---------  ---------  --------------------    -------------------------     
  Row   1:    ***0***  check_data(this,t)_0    -                             
  Row   2:          1  check_data(this,t)_1    check_parity(this,t)          
  Row   3:    ***0***  check_parity(this,t)_0  check_data(this,t)            
  Row   4:          1  check_parity(this,t)_1  check_data(this,t)            

----------------Focused Condition View-------------------
Line       61 Item    1  (t.RsTx_data[7:0] == t.HWDATA[7:0])
Condition totals: 0 of 1 input term covered = 0.00%

                           Input Term   Covered  Reason for no coverage   Hint
                          -----------  --------  -----------------------  --------------
  (t.RsTx_data[7:0] == t.HWDATA[7:0])         N  '_0' not hit             Hit '_0'

     Rows:       Hits  FEC Target                             Non-masking condition(s)      
 ---------  ---------  --------------------                   -------------------------     
  Row   1:    ***0***  (t.RsTx_data[7:0] == t.HWDATA[7:0])_0  -                             
  Row   2:          1  (t.RsTx_data[7:0] == t.HWDATA[7:0])_1  -                             

-----------Focused Condition View (Bimodal)--------------
Line       73 Item    1  ((~^t.RsTx_data ^ t.PARITYSEL) ^ t.parity_fault_injection)
Condition totals: 0 of 3 input terms covered = 0.00%

                  Input Term   Covered  Reason for no coverage                  Hint
                 -----------  --------  --------------------------------------  --------------
               ~^t.RsTx_data         N  Both rows hit for same output ->1      Hit either row for output ->0
                 t.PARITYSEL         N  Both rows hit for same output ->1      Hit either row for output ->0
    t.parity_fault_injection         N  Both rows hit for same output ->1      Hit either row for output ->0

    Rows:   Hits(->0)   Hits(->1)  FEC Target                    Non-masking condition(s)           

---------  ----------  ----------  --------------------          -----------------------------------
 Row   1:           0           1  ~^t.RsTx_data_0               -                                  
 Row   2:           0           1  ~^t.RsTx_data_1               -                                  
 Row   3:           0           1  t.PARITYSEL_0                 -                                  
 Row   4:           0           1  t.PARITYSEL_1                 -                                  
 Row   5:           0           1  t.parity_fault_injection_0    -                                  
 Row   6:           0           1  t.parity_fault_injection_1    -                                  



COVERGROUP COVERAGE:
-----------------------------------------------------------------------------------------------
Covergroup                                             Metric       Goal    Status               
                                                                                              
-----------------------------------------------------------------------------------------------
 TYPE /ahb_uart_pkg/ahb_uart_tx_scoreboard/cg         100.00%        100    Covered              
    covered/total bins:                                    42         42                      
    missing/total bins:                                     0         42                      
    % Hit:                                            100.00%        100                      
    Coverpoint cg::even_odd_d_in                      100.00%        100    Covered              
        covered/total bins:                                 2          2                      
        missing/total bins:                                 0          2                      
        % Hit:                                        100.00%        100                      
        bin even                                          487          1    Covered              
        bin odd                                           513          1    Covered              
    Coverpoint cg::even_odd_parity                    100.00%        100    Covered              
        covered/total bins:                                 2          2                      
        missing/total bins:                                 0          2                      
        % Hit:                                        100.00%        100                      
        bin odd_parity                                    523          1    Covered              
        bin even_parity                                   477          1    Covered              
    Coverpoint cg::parity_fault_injection             100.00%        100    Covered              
        covered/total bins:                                 2          2                      
        missing/total bins:                                 0          2                      
        % Hit:                                        100.00%        100                      
        bin no_fault_inj                                  907          1    Covered              
        bin fault_inj                                      93          1    Covered              
    Coverpoint cg::range_HWDATA_vals                  100.00%        100    Covered              
        covered/total bins:                                 4          4                      
        missing/total bins:                                 0          4                      
        % Hit:                                        100.00%        100                      
        bin lo                                            234          1    Covered              
        bin med_lo                                        267          1    Covered              
        bin med_hi                                        253          1    Covered              
        bin hi                                            246          1    Covered              
    Cross cg::all                                     100.00%        100    Covered              
        covered/total bins:                                32         32                      
        missing/total bins:                                 0         32                      
        % Hit:                                        100.00%        100                      
        bin <lo,even,no_fault_inj,odd_parity>              50          1    Covered              
        bin <med_lo,even,no_fault_inj,odd_parity>          62          1    Covered              
        bin <med_hi,even,no_fault_inj,odd_parity>          61          1    Covered              
        bin <hi,even,no_fault_inj,odd_parity>              58          1    Covered              
        bin <lo,odd,no_fault_inj,odd_parity>               59          1    Covered              
        bin <med_lo,odd,no_fault_inj,odd_parity>           65          1    Covered              
        bin <med_hi,odd,no_fault_inj,odd_parity>           57          1    Covered              
        bin <hi,odd,no_fault_inj,odd_parity>               59          1    Covered              
        bin <lo,even,fault_inj,odd_parity>                  8          1    Covered              
        bin <med_lo,even,fault_inj,odd_parity>              9          1    Covered              
        bin <med_hi,even,fault_inj,odd_parity>              5          1    Covered              
        bin <hi,even,fault_inj,odd_parity>                  5          1    Covered              
        bin <lo,odd,fault_inj,odd_parity>                   8          1    Covered              
        bin <med_lo,odd,fault_inj,odd_parity>               3          1    Covered              
        bin <med_hi,odd,fault_inj,odd_parity>               8          1    Covered              
        bin <hi,odd,fault_inj,odd_parity>                   6          1    Covered              
        bin <lo,even,no_fault_inj,even_parity>             45          1    Covered              
        bin <med_lo,even,no_fault_inj,even_parity>         58          1    Covered              
        bin <med_hi,even,no_fault_inj,even_parity>         54          1    Covered              
        bin <hi,even,no_fault_inj,even_parity>             47          1    Covered              
        bin <lo,odd,no_fault_inj,even_parity>              53          1    Covered              
        bin <med_lo,odd,no_fault_inj,even_parity>          61          1    Covered              
        bin <med_hi,odd,no_fault_inj,even_parity>          55          1    Covered              
        bin <hi,odd,no_fault_inj,even_parity>              63          1    Covered              
        bin <lo,even,fault_inj,even_parity>                 9          1    Covered              
        bin <med_lo,even,fault_inj,even_parity>             4          1    Covered              
        bin <med_hi,even,fault_inj,even_parity>             9          1    Covered              
        bin <hi,even,fault_inj,even_parity>                 3          1    Covered              
        bin <lo,odd,fault_inj,even_parity>                  2          1    Covered              
        bin <med_lo,odd,fault_inj,even_parity>              5          1    Covered              
        bin <med_hi,odd,fault_inj,even_parity>              4          1    Covered              
        bin <hi,odd,fault_inj,even_parity>                  5          1    Covered              
 TYPE /ahb_uart_pkg/ahb_uart_rx_scoreboard/cg         100.00%        100    Covered              
    covered/total bins:                                    42         42                      
    missing/total bins:                                     0         42                      
    % Hit:                                            100.00%        100                      
    Coverpoint cg::even_odd_d_in                      100.00%        100    Covered              
        covered/total bins:                                 2          2                      
        missing/total bins:                                 0          2                      
        % Hit:                                        100.00%        100                      
        bin even                                          487          1    Covered              
        bin odd                                           513          1    Covered              
    Coverpoint cg::even_odd_parity                    100.00%        100    Covered              
        covered/total bins:                                 2          2                      
        missing/total bins:                                 0          2                      
        % Hit:                                        100.00%        100                      
        bin odd_parity                                    523          1    Covered              
        bin even_parity                                   477          1    Covered              
    Coverpoint cg::parity_fault_injection             100.00%        100    Covered              
        covered/total bins:                                 2          2                      
        missing/total bins:                                 0          2                      
        % Hit:                                        100.00%        100                      
        bin no_fault_inj                                  907          1    Covered              
        bin fault_inj                                      93          1    Covered              
    Coverpoint cg::range_HRDATA_vals                  100.00%        100    Covered              
        covered/total bins:                                 4          4                      
        missing/total bins:                                 0          4                      
        % Hit:                                        100.00%        100                      
        bin lo                                            234          1    Covered              
        bin med_lo                                        267          1    Covered              
        bin med_hi                                        253          1    Covered              
        bin hi                                            246          1    Covered              
    Cross cg::all                                     100.00%        100    Covered              
        covered/total bins:                                32         32                      
        missing/total bins:                                 0         32                      
        % Hit:                                        100.00%        100                      
        bin <lo,odd_parity,even,no_fault_inj>              50          1    Covered              
        bin <med_lo,odd_parity,even,no_fault_inj>          62          1    Covered              
        bin <med_hi,odd_parity,even,no_fault_inj>          61          1    Covered              
        bin <hi,odd_parity,even,no_fault_inj>              58          1    Covered              
        bin <lo,even_parity,even,no_fault_inj>             45          1    Covered              
        bin <med_lo,even_parity,even,no_fault_inj>         58          1    Covered              
        bin <med_hi,even_parity,even,no_fault_inj>         54          1    Covered              
        bin <hi,even_parity,even,no_fault_inj>             47          1    Covered              
        bin <lo,odd_parity,odd,no_fault_inj>               59          1    Covered              
        bin <med_lo,odd_parity,odd,no_fault_inj>           65          1    Covered              
        bin <med_hi,odd_parity,odd,no_fault_inj>           57          1    Covered              
        bin <hi,odd_parity,odd,no_fault_inj>               59          1    Covered              
        bin <lo,even_parity,odd,no_fault_inj>              53          1    Covered              
        bin <med_lo,even_parity,odd,no_fault_inj>          61          1    Covered              
        bin <med_hi,even_parity,odd,no_fault_inj>          55          1    Covered              
        bin <hi,even_parity,odd,no_fault_inj>              63          1    Covered              
        bin <lo,odd_parity,even,fault_inj>                  8          1    Covered              
        bin <med_lo,odd_parity,even,fault_inj>              9          1    Covered              
        bin <med_hi,odd_parity,even,fault_inj>              5          1    Covered              
        bin <hi,odd_parity,even,fault_inj>                  5          1    Covered              
        bin <lo,even_parity,even,fault_inj>                 9          1    Covered              
        bin <med_lo,even_parity,even,fault_inj>             4          1    Covered              
        bin <med_hi,even_parity,even,fault_inj>             9          1    Covered              
        bin <hi,even_parity,even,fault_inj>                 3          1    Covered              
        bin <lo,odd_parity,odd,fault_inj>                   8          1    Covered              
        bin <med_lo,odd_parity,odd,fault_inj>               3          1    Covered              
        bin <med_hi,odd_parity,odd,fault_inj>               8          1    Covered              
        bin <hi,odd_parity,odd,fault_inj>                   6          1    Covered              
        bin <lo,even_parity,odd,fault_inj>                  2          1    Covered              
        bin <med_lo,even_parity,odd,fault_inj>              5          1    Covered              
        bin <med_hi,even_parity,odd,fault_inj>              4          1    Covered              
        bin <hi,even_parity,odd,fault_inj>                  5          1    Covered              

TOTAL COVERGROUP COVERAGE: 100.00%  COVERGROUP TYPES: 2

Total Coverage By File (code coverage only, filtered view): 73.02%

End time: 19:26:27 on Dec 17,2020, Elapsed time: 0:00:00
Errors: 0, Warnings: 0
